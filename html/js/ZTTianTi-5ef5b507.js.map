{"version":3,"file":"ZTTianTi-5ef5b507.js","sources":["../../front/src/views/ZTTianTi.vue"],"sourcesContent":["<template>\r\n  <div class=\"zt-tian-ti-new\">\r\n    <!-- 顶部统计标签区 -->\r\n    <div class=\"zt-stats-bar\">\r\n      <div\r\n        v-for=\"stat in statsList\"\r\n        :key=\"stat.label\"\r\n        class=\"zt-stat-tag\"\r\n        :style=\"{ background: stat.bg, color: stat.color }\"\r\n      >\r\n        <span class=\"zt-stat-label\">{{ stat.label }}:</span>\r\n        <span class=\"zt-stat-value\">{{ stat.value }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 主体内容区 -->\r\n    <div class=\"zt-tian-ti-content-new\">\r\n      <div v-if=\"loading\" class=\"zt-loading\">\r\n        <span class=\"zt-loading-spinner\"></span>\r\n        <span>数据加载中...</span>\r\n      </div>\r\n      <div v-else-if=\"!stockData.length\" class=\"zt-empty\">\r\n        <span>暂无数据</span>\r\n      </div>\r\n      <div v-else class=\"zt-tian-ti-table-new\">\r\n        <div\r\n          v-for=\"group in groupedStocks\"\r\n          :key=\"group.zttj_days\"\r\n          class=\"zt-tier-row\"\r\n        >\r\n          <div class=\"zt-tier-label\">\r\n            <span class=\"zt-tier-main\">{{ group.zttj_days === 1 ? '首板' : group.zttj_days + '板' }}</span>\r\n          </div>\r\n          <div class=\"zt-tier-stocks\">\r\n            <div\r\n              v-for=\"item in group.stocks\"\r\n              :key=\"item.id\"\r\n              class=\"zt-stock-card\"\r\n              :class=\"{ 'zt-stock-yizi': item.yizi }\"\r\n            >\r\n              <div class=\"zt-stock-header\">\r\n                <span class=\"zt-stock-name\">{{ item.name }}</span>\r\n                <span v-if=\"item.yizi\" class=\"zt-yizi-tag\">一字</span>\r\n              </div>\r\n              <div class=\"zt-stock-tags\">\r\n                <span\r\n                  v-for=\"reason in getReasons(item.reason_type)\"\r\n                  :key=\"reason\"\r\n                  class=\"zt-reason-tag\"\r\n                  :style=\"{ background: getTagColor(reason) }\"\r\n                >\r\n                  {{ reason }}\r\n                </span>\r\n              </div>\r\n              <div class=\"zt-stock-meta\">\r\n                <span class=\"zt-stock-time\">{{ formatTime(item.first_zt_time) }}</span>\r\n                <span v-if=\"item.last_zt_time && item.last_zt_time !== item.first_zt_time\" class=\"zt-stock-time\">{{ formatTime(item.last_zt_time) }}</span>\r\n              </div>\r\n              <div class=\"zt-stock-extra\">\r\n                <span v-if=\"item.extra\" class=\"zt-stock-extra-label\">{{ item.extra }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\n\r\nconst loading = ref(false)\r\nconst stockData = ref([])\r\n\r\n// 统计标签数据（可根据实际数据动态生成）\r\nconst statsList = computed(() => {\r\n  // 统计逻辑示例，根据实际数据结构调整\r\n  const stats = [\r\n    { label: '泛金融', value: 0, bg: '#f56c6c', color: '#fff' },\r\n    { label: '稀土', value: 0, bg: '#ff9800', color: '#fff' },\r\n    { label: '光伏', value: 0, bg: '#e0f7fa', color: '#333' },\r\n    { label: '医药', value: 0, bg: '#e1bee7', color: '#333' },\r\n    { label: '金属', value: 0, bg: '#ffe082', color: '#333' },\r\n    { label: '地产基建', value: 0, bg: '#bdbdbd', color: '#333' },\r\n    { label: '军工', value: 0, bg: '#b0bec5', color: '#333' },\r\n    { label: '氢能', value: 0, bg: '#b2dfdb', color: '#333' },\r\n  ]\r\n  // 统计各类数量\r\n  stockData.value.forEach(item => {\r\n    if (item.reason_type && item.reason_type.includes('泛金融')) stats[0].value++\r\n    if (item.reason_type && item.reason_type.includes('稀土')) stats[1].value++\r\n    if (item.reason_type && item.reason_type.includes('光伏')) stats[2].value++\r\n    if (item.reason_type && item.reason_type.includes('医药')) stats[3].value++\r\n    if (item.reason_type && item.reason_type.includes('金属')) stats[4].value++\r\n    if (item.reason_type && item.reason_type.includes('地产基建')) stats[5].value++\r\n    if (item.reason_type && item.reason_type.includes('军工')) stats[6].value++\r\n    if (item.reason_type && item.reason_type.includes('氢能')) stats[7].value++\r\n  })\r\n  // 只显示有数量的标签\r\n  return stats.filter(s => s.value > 0)\r\n})\r\n\r\n// 获取数据\r\nconst fetchData = async () => {\r\n  loading.value = true\r\n  try {\r\n    const startDate = '2025-07-11'\r\n    const endDate = '2025-07-13'\r\n    const response = await fetch(`https://www.wttiao.com/moni/ztpool/get?startDate=${startDate}&endDate=${endDate}`)\r\n    const result = await response.json()\r\n    if (result.code === 0) {\r\n      // 标记一字板\r\n      result.data.forEach(item => {\r\n        item.yizi = item.yz_flag === 1 || (item.yz_flag === undefined && item.name && item.name.includes('一字'))\r\n      })\r\n      stockData.value = result.data || []\r\n    }\r\n  } catch (e) {\r\n    // 错误处理\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 分组\r\nconst groupedStocks = computed(() => {\r\n  const groups = {}\r\n  stockData.value.forEach(stock => {\r\n    // 过滤连板：zttj_days 和 zttj_ct 相等表示连板，且排除首板（zttj_days > 1）\r\n    if (stock.zttj_days === stock.zttj_ct && stock.zttj_days > 1) {\r\n      const days = stock.zttj_days\r\n      if (!groups[days]) {\r\n        groups[days] = { zttj_days: days, stocks: [] }\r\n      }\r\n      groups[days].stocks.push(stock)\r\n    }\r\n  })\r\n  return Object.values(groups).sort((a, b) => b.zttj_days - a.zttj_days)\r\n})\r\n\r\n// 解析涨停原因\r\nconst getReasons = (reasonType) => {\r\n  if (!reasonType) return []\r\n  return reasonType.split('+').filter(r => r.trim())\r\n}\r\n\r\n// 标签颜色\r\nconst getTagColor = (reason) => {\r\n  const colorMap = {\r\n    '泛金融': '#f56c6c',\r\n    '稀土': '#ff9800',\r\n    '光伏': '#7ec6f3',\r\n    '医药': '#b388ff',\r\n    '金属': '#ffd54f',\r\n    '地产基建': '#bdbdbd',\r\n    '军工': '#90a4ae',\r\n    '氢能': '#80cbc4',\r\n    '公告': '#e0e0e0',\r\n    '一字': '#e040fb',\r\n  }\r\n  for (const [key, color] of Object.entries(colorMap)) {\r\n    if (reason.includes(key)) return color\r\n  }\r\n  return '#e0e0e0'\r\n}\r\n\r\n// 时间格式\r\nconst formatTime = (timeStr) => {\r\n  if (!timeStr) return ''\r\n  const time = timeStr.toString()\r\n  if (time.length === 5) {\r\n    return `${time.slice(0, 2)}:${time.slice(2, 4)}:${time.slice(4)}`\r\n  }\r\n  return timeStr\r\n}\r\n\r\nonMounted(() => {\r\n  fetchData()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.zt-tian-ti-new {\r\n  padding: 16px 0;\r\n  background: #f5f7fa;\r\n  min-height: 100vh;\r\n}\r\n.zt-stats-bar {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  margin-bottom: 16px;\r\n  justify-content: flex-start;\r\n}\r\n.zt-stat-tag {\r\n  display: flex;\r\n  align-items: center;\r\n  border-radius: 12px;\r\n  padding: 3px 12px;\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  box-shadow: 0 1px 4px rgba(0,0,0,0.04);\r\n  min-width: 60px;\r\n  justify-content: center;\r\n}\r\n.zt-stat-label {\r\n  margin-right: 3px;\r\n}\r\n.zt-stat-value {\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n.zt-tian-ti-content-new {\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 6px rgba(0,0,0,0.08);\r\n  padding: 0 0 16px 0;\r\n}\r\n.zt-loading, .zt-empty {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 0;\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n.zt-loading-spinner {\r\n  width: 24px;\r\n  height: 24px;\r\n  border: 3px solid #e0e0e0;\r\n  border-top: 3px solid #409eff;\r\n  border-radius: 50%;\r\n  animation: zt-spin 1s linear infinite;\r\n  margin-bottom: 8px;\r\n}\r\n@keyframes zt-spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n.zt-tian-ti-table-new {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  padding: 16px 16px 0 16px;\r\n}\r\n.zt-tier-row {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n}\r\n.zt-tier-label {\r\n  min-width: 50px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #409eff;\r\n  margin-top: 4px;\r\n}\r\n.zt-tier-main {\r\n  border-radius: 6px;\r\n  background: #e3f2fd;\r\n  padding: 4px 12px;\r\n  font-size: 14px;\r\n  color: #1976d2;\r\n  font-weight: 700;\r\n}\r\n.zt-tier-stocks {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  flex: 1;\r\n}\r\n.zt-stock-card {\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 4px rgba(0,0,0,0.06);\r\n  padding: 8px 12px 6px 12px;\r\n  min-width: 130px;\r\n  max-width: 160px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  position: relative;\r\n  transition: box-shadow 0.2s, transform 0.2s;\r\n  border: 1px solid #e3e3e3;\r\n}\r\n.zt-stock-card:hover {\r\n  box-shadow: 0 2px 8px rgba(64,158,255,0.13);\r\n  transform: translateY(-1px) scale(1.02);\r\n  border-color: #90caf9;\r\n}\r\n.zt-stock-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n.zt-stock-name {\r\n  font-size: 14px;\r\n  font-weight: 700;\r\n  color: #222;\r\n}\r\n.zt-yizi-tag {\r\n  background: #e040fb;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n  font-size: 10px;\r\n  padding: 1px 5px;\r\n  font-weight: 600;\r\n  margin-left: 2px;\r\n}\r\n.zt-stock-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 4px;\r\n}\r\n.zt-reason-tag {\r\n  border-radius: 4px;\r\n  padding: 1px 6px;\r\n  font-size: 10px;\r\n  color: #fff;\r\n  font-weight: 600;\r\n  background: #bdbdbd;\r\n}\r\n.zt-stock-meta {\r\n  display: flex;\r\n  gap: 6px;\r\n  font-size: 10px;\r\n  color: #888;\r\n}\r\n.zt-stock-extra {\r\n  margin-top: 1px;\r\n}\r\n.zt-stock-extra-label {\r\n  font-size: 10px;\r\n  color: #ff9800;\r\n  font-weight: 600;\r\n}\r\n.zt-stock-yizi {\r\n  border: 1.5px solid #e040fb;\r\n}\r\n@media (max-width: 900px) {\r\n  .zt-tian-ti-table-new {\r\n    padding: 8px 4px 0 4px;\r\n  }\r\n  .zt-tier-stocks {\r\n    gap: 6px;\r\n  }\r\n  .zt-stock-card {\r\n    min-width: 100px;\r\n    max-width: 120px;\r\n    padding: 6px 6px 4px 6px;\r\n  }\r\n  .zt-tier-label {\r\n    font-size: 14px;\r\n  }\r\n}\r\n@media (max-width: 600px) {\r\n  .zt-tian-ti-new {\r\n    padding: 6px 0;\r\n  }\r\n  .zt-stats-bar {\r\n    gap: 4px;\r\n    margin-bottom: 8px;\r\n  }\r\n  .zt-tian-ti-table-new {\r\n    gap: 12px;\r\n    padding: 4px 0 0 0;\r\n  }\r\n  .zt-tier-label {\r\n    min-width: 35px;\r\n    font-size: 12px;\r\n  }\r\n  .zt-tier-main {\r\n    font-size: 12px;\r\n    padding: 3px 6px;\r\n  }\r\n  .zt-stock-card {\r\n    min-width: 80px;\r\n    max-width: 100px;\r\n    padding: 4px 3px 3px 3px;\r\n  }\r\n  .zt-stock-name {\r\n    font-size: 11px;\r\n  }\r\n  .zt-reason-tag {\r\n    font-size: 9px;\r\n    padding: 1px 4px;\r\n  }\r\n}\r\n</style> "],"names":["loading","ref","stockData","statsList","computed","stats","item","fetchData","result","groupedStocks","groups","stock","days","a","b","getReasons","reasonType","r","getTagColor","reason","colorMap","key","color","formatTime","timeStr","time","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","stat","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_cache","_hoisted_8","group","_hoisted_9","_hoisted_10","_hoisted_11","_normalizeClass","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_normalizeStyle","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_7"],"mappings":"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"}