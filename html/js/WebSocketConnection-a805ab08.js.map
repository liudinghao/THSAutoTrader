{"version":3,"file":"WebSocketConnection-a805ab08.js","sources":["../../front/src/views/WebSocketConnection.vue"],"sourcesContent":["<template>\r\n  <div class=\"websocket-container\">\r\n    <el-card class=\"main-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>WebSocket 连接</span>\r\n          <el-tag :type=\"connectionStatus === 'connected' ? 'success' : 'danger'\">\r\n            {{ connectionStatusText }}\r\n          </el-tag>\r\n        </div>\r\n      </template>\r\n\r\n      <div class=\"connection-controls\">\r\n        <el-button \r\n          @click=\"connect\" \r\n          :disabled=\"connectionStatus === 'connected'\"\r\n          type=\"primary\"\r\n        >\r\n          连接\r\n        </el-button>\r\n        <el-button \r\n          @click=\"disconnect\" \r\n          :disabled=\"connectionStatus === 'disconnected'\"\r\n          type=\"danger\"\r\n        >\r\n          断开连接\r\n        </el-button>\r\n        <el-button @click=\"clearMessages\" type=\"info\">清空消息</el-button>\r\n      </div>\r\n\r\n      <div class=\"message-section\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"12\">\r\n            <h3>发送消息</h3>\r\n            <el-input\r\n              v-model=\"messageToSend\"\r\n              type=\"textarea\"\r\n              :rows=\"4\"\r\n              placeholder=\"输入要发送的消息...\"\r\n            />\r\n            <el-button \r\n              @click=\"sendMessage\" \r\n              :disabled=\"connectionStatus !== 'connected'\"\r\n              type=\"success\"\r\n              style=\"margin-top: 10px;\"\r\n            >\r\n              发送消息\r\n            </el-button>\r\n          </el-col>\r\n          \r\n          <el-col :span=\"12\">\r\n            <h3>接收消息</h3>\r\n            <div class=\"message-display\">\r\n              <div \r\n                v-for=\"(msg, index) in messages\" \r\n                :key=\"index\"\r\n                :class=\"['message-item', msg.type]\"\r\n              >\r\n                <span class=\"message-time\">{{ msg.timestamp }}</span>\r\n                <span class=\"message-content\">{{ msg.content }}</span>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'WebSocketConnection',\r\n  data() {\r\n    return {\r\n      ws: null,\r\n      connectionStatus: 'disconnected',\r\n      messageToSend: '',\r\n      messages: [],\r\n      wsUrl: 'ws://127.0.0.1:8765/'\r\n    }\r\n  },\r\n  computed: {\r\n    connectionStatusText() {\r\n      return this.connectionStatus === 'connected' ? '已连接' : '未连接'\r\n    }\r\n  },\r\n  methods: {\r\n    connect() {\r\n      try {\r\n        this.ws = new WebSocket(this.wsUrl)\r\n        \r\n        this.ws.onopen = () => {\r\n          this.connectionStatus = 'connected'\r\n          this.addMessage('连接成功', 'success')\r\n        }\r\n        \r\n        this.ws.onmessage = (event) => {\r\n          this.addMessage(`收到: ${event.data}`, 'received')\r\n        }\r\n        \r\n        this.ws.onclose = () => {\r\n          this.connectionStatus = 'disconnected'\r\n          this.addMessage('连接已关闭', 'warning')\r\n        }\r\n        \r\n        this.ws.onerror = (error) => {\r\n          this.addMessage(`连接错误: ${error}`, 'error')\r\n        }\r\n      } catch (error) {\r\n        this.addMessage(`连接失败: ${error.message}`, 'error')\r\n      }\r\n    },\r\n    \r\n    disconnect() {\r\n      if (this.ws) {\r\n        this.ws.close()\r\n        this.ws = null\r\n      }\r\n    },\r\n    \r\n    sendMessage() {\r\n      if (this.ws && this.connectionStatus === 'connected' && this.messageToSend.trim()) {\r\n        this.ws.send(this.messageToSend)\r\n        this.addMessage(`发送: ${this.messageToSend}`, 'sent')\r\n        this.messageToSend = ''\r\n      }\r\n    },\r\n    \r\n    addMessage(content, type) {\r\n      const timestamp = new Date().toLocaleTimeString()\r\n      this.messages.unshift({\r\n        content,\r\n        type,\r\n        timestamp\r\n      })\r\n      \r\n      // 限制消息数量\r\n      if (this.messages.length > 100) {\r\n        this.messages = this.messages.slice(0, 100)\r\n      }\r\n    },\r\n    \r\n    clearMessages() {\r\n      this.messages = []\r\n    }\r\n  },\r\n  \r\n  beforeUnmount() {\r\n    this.disconnect()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.websocket-container {\r\n  padding: 20px;\r\n}\r\n\r\n.main-card {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.connection-controls {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.connection-controls .el-button {\r\n  margin-right: 10px;\r\n}\r\n\r\n.message-section h3 {\r\n  margin-bottom: 10px;\r\n  color: #333;\r\n}\r\n\r\n.message-display {\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  height: 300px;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n  background-color: #fafafa;\r\n}\r\n\r\n.message-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 8px;\r\n  padding: 5px;\r\n  border-radius: 3px;\r\n}\r\n\r\n.message-item.sent {\r\n  background-color: #e1f5fe;\r\n  border-left: 3px solid #2196f3;\r\n}\r\n\r\n.message-item.received {\r\n  background-color: #f3e5f5;\r\n  border-left: 3px solid #9c27b0;\r\n}\r\n\r\n.message-item.success {\r\n  background-color: #e8f5e8;\r\n  border-left: 3px solid #4caf50;\r\n}\r\n\r\n.message-item.error {\r\n  background-color: #ffebee;\r\n  border-left: 3px solid #f44336;\r\n}\r\n\r\n.message-item.warning {\r\n  background-color: #fff3e0;\r\n  border-left: 3px solid #ff9800;\r\n}\r\n\r\n.message-time {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.message-content {\r\n  font-size: 14px;\r\n  word-break: break-word;\r\n}\r\n</style>"],"names":["_sfc_main","event","error","content","type","timestamp","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_createVNode","_component_el_card","_createElementVNode","_cache","_component_el_tag","$data","$options","_component_el_button","_component_el_row","_component_el_col","_component_el_input","$event","_Fragment","_renderList","msg","index","_normalizeClass","_toDisplayString"],"mappings":"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"}