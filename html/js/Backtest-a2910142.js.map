{"version":3,"file":"Backtest-a2910142.js","sources":["../../front/src/views/Backtest.vue"],"sourcesContent":["<template>\r\n  <div class=\"backtest-container\">\r\n    <div class=\"page-header\">\r\n      <div class=\"header-content\">\r\n        <div class=\"header-icon\">\r\n          <el-icon size=\"32\" color=\"#409eff\">\r\n            <TrendCharts />\r\n          </el-icon>\r\n        </div>\r\n        <div class=\"header-text\">\r\n          <h2>集合竞价回测</h2>\r\n          <p class=\"page-description\">基于历史数据验证集合竞价选股策略的有效性</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"controls-section\">\r\n      <div class=\"controls-card\">\r\n        <div class=\"card-header\">\r\n          <el-icon size=\"16\" color=\"#606266\">\r\n            <Calendar />\r\n          </el-icon>\r\n          <span class=\"card-title\">回测配置</span>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"form-row\">\r\n            <label class=\"form-label\">回测日期</label>\r\n            <div class=\"form-controls\">\r\n              <el-date-picker\r\n                v-model=\"selectedDate\"\r\n                type=\"date\"\r\n                placeholder=\"选择回测日期\"\r\n                format=\"YYYY-MM-DD\"\r\n                value-format=\"YYYY-MM-DD\"\r\n                @change=\"onDateChange\"\r\n                :disabled=\"loading\"\r\n                size=\"default\"\r\n              />\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"fetchBacktestData\"\r\n                :loading=\"loading\"\r\n                :disabled=\"!selectedDate\"\r\n                size=\"default\"\r\n              >\r\n                <template #icon>\r\n                  <el-icon><Search /></el-icon>\r\n                </template>\r\n                {{ loading ? '分析中...' : '开始回测' }}\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"strategy-info\">\r\n            <el-tag type=\"info\" size=\"small\">策略：集合竞价选股</el-tag>\r\n            <el-tag type=\"warning\" size=\"small\">条件：竞价涨跌幅 3%-5%</el-tag>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"results-section\" v-if=\"stockList.length > 0 || loading\">\r\n      <div class=\"results-card\">\r\n        <div class=\"results-header\">\r\n          <div class=\"results-title\">\r\n            <el-icon size=\"18\" color=\"#409eff\">\r\n              <DataAnalysis />\r\n            </el-icon>\r\n            <h3>回测结果</h3>\r\n          </div>\r\n          <div class=\"header-actions\">\r\n            <el-button\r\n              v-if=\"stockList.length > 0\"\r\n              type=\"success\"\r\n              @click=\"saveStockPickResults\"\r\n              :loading=\"saving\"\r\n              :disabled=\"saving\"\r\n              size=\"default\"\r\n              round\r\n            >\r\n              <template #icon>\r\n                <el-icon><Download /></el-icon>\r\n              </template>\r\n              {{ saving ? '保存中...' : '保存选股结果' }}\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"stats-grid\">\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-value\">{{ stockList.length }}</div>\r\n            <div class=\"stat-label\">符合条件股票</div>\r\n          </div>\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-value\">{{ selectedDate || '--' }}</div>\r\n            <div class=\"stat-label\">回测日期</div>\r\n          </div>\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-value\">3%-5%</div>\r\n            <div class=\"stat-label\">竞价涨跌幅</div>\r\n          </div>\r\n          <div class=\"stat-card\" v-if=\"successRate !== null\">\r\n            <div class=\"stat-value success-rate-value\">{{ successRate }}%</div>\r\n            <div class=\"stat-label\">成功率 ({{ successCount }}/{{ validCount }})</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"table-container\">\r\n        <el-table\r\n          :data=\"stockList\"\r\n          :loading=\"loading\"\r\n          stripe\r\n          height=\"600\"\r\n          class=\"stock-table\"\r\n          :header-cell-style=\"{ backgroundColor: '#f8f9fa', color: '#495057', fontWeight: '600' }\"\r\n          :row-style=\"{ cursor: 'default' }\"\r\n        >\r\n        <el-table-column prop=\"code\" label=\"股票\" width=\"100\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"stock-info\" @click=\"handleStockClick(row)\" title=\"点击跳转到分时图\">\r\n              <div class=\"stock-code\">{{ row.code }}</div>\r\n              <div class=\"stock-name\">{{ row.name }}</div>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"zsz\" label=\"市值(亿)\" width=\"90\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatMarketCap(row.zsz) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"reason_type\" label=\"选股原因\" width=\"auto\">\r\n          <template #default=\"{ row }\">\r\n            <div class=\"reason-text\">\r\n              {{ row.reason_type || '--' }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"auction_change\" label=\"竞价(%)\" width=\"90\">\r\n          <template #default=\"{ row }\">\r\n            <span\r\n              v-if=\"row.auction_change !== null && row.auction_change !== undefined\"\r\n              :class=\"getReturnClass(row.auction_change)\"\r\n            >\r\n              {{ row.auction_change }}%\r\n            </span>\r\n            <span v-else class=\"no-data\">--</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"close_change\" label=\"收盘涨幅\" width=\"90\">\r\n          <template #default=\"{ row }\">\r\n            <span\r\n              v-if=\"row.close_change !== null && row.close_change !== undefined\"\r\n              :class=\"getReturnClass(row.close_change)\"\r\n            >\r\n              {{ row.close_change }}%\r\n            </span>\r\n            <span v-else class=\"no-data\">--</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"next_day_return\" label=\"次日开盘\" width=\"90\">\r\n          <template #default=\"{ row }\">\r\n            <span\r\n              v-if=\"row.next_day_return !== null && row.next_day_return !== undefined\"\r\n              :class=\"getReturnClass(row.next_day_return)\"\r\n            >\r\n              {{ row.next_day_return }}%\r\n            </span>\r\n            <span v-else class=\"no-data\">--</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"next_day_close\" label=\"次日收盘\" width=\"90\">\r\n          <template #default=\"{ row }\">\r\n            <span\r\n              v-if=\"row.next_day_close !== null && row.next_day_close !== undefined\"\r\n              :class=\"getReturnClass(row.next_day_close)\"\r\n            >\r\n              {{ row.next_day_close }}%\r\n            </span>\r\n            <span v-else class=\"no-data\">--</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"date\" label=\"涨停日期\" width=\"100\" />\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else-if=\"!loading && selectedDate\" class=\"no-data-message\">\r\n      <el-empty description=\"该日期没有找到回测数据\" />\r\n    </div>\r\n\r\n    <div v-else-if=\"!selectedDate\" class=\"welcome-message\">\r\n      <el-empty description=\"请选择日期开始回测\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, computed } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { TrendCharts, Calendar, Search, DataAnalysis, Download } from '@element-plus/icons-vue'\r\nimport { executeAuctionPreselect } from '@/strategies/auctionPreselect.js'\r\nimport { jumpToQuote } from '@/utils/quoteApi.js'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'Backtest',\r\n  components: {\r\n    TrendCharts,\r\n    Calendar,\r\n    Search,\r\n    DataAnalysis,\r\n    Download\r\n  },\r\n  setup() {\r\n    const selectedDate = ref('')\r\n    const loading = ref(false)\r\n    const stockList = ref([])\r\n    const saving = ref(false)\r\n\r\n    // 成功率计算 - 收盘涨幅大于竞价涨幅\r\n    const successStats = computed(() => {\r\n      if (stockList.value.length === 0) {\r\n        return {\r\n          successCount: 0,\r\n          validCount: 0,\r\n          successRate: null\r\n        }\r\n      }\r\n\r\n      // 筛选有效数据（同时有竞价涨幅和收盘涨幅的股票）\r\n      const validStocks = stockList.value.filter(stock =>\r\n        stock.auction_change !== null && stock.auction_change !== undefined &&\r\n        stock.close_change !== null && stock.close_change !== undefined\r\n      )\r\n\r\n      const validCount = validStocks.length\r\n      if (validCount === 0) {\r\n        return {\r\n          successCount: 0,\r\n          validCount: 0,\r\n          successRate: null\r\n        }\r\n      }\r\n\r\n      // 计算成功的股票数量（收盘涨幅 > 竞价涨幅）\r\n      const successCount = validStocks.filter(stock =>\r\n        parseFloat(stock.close_change) > parseFloat(stock.auction_change)\r\n      ).length\r\n\r\n      const successRate = ((successCount / validCount) * 100).toFixed(1)\r\n\r\n      return {\r\n        successCount,\r\n        validCount,\r\n        successRate: parseFloat(successRate)\r\n      }\r\n    })\r\n\r\n    // 提取计算属性的值供模板使用\r\n    const successCount = computed(() => successStats.value.successCount)\r\n    const validCount = computed(() => successStats.value.validCount)\r\n    const successRate = computed(() => successStats.value.successRate)\r\n\r\n    // 获取回测数据\r\n    const fetchBacktestData = async () => {\r\n      if (!selectedDate.value) {\r\n        ElMessage.warning('请先选择日期')\r\n        return\r\n      }\r\n\r\n      loading.value = true\r\n      try {\r\n        // 使用竞价选股策略执行回测\r\n        const result = await executeAuctionPreselect({\r\n          date: selectedDate.value,\r\n          minChange: 3, // 最小竞价涨跌幅 3%\r\n          maxChange: 5, // 最大竞价涨跌幅 5%\r\n          onProgress: (message, progress) => {\r\n            console.log(`[${progress}%] ${message}`)\r\n          }\r\n        })\r\n\r\n        // 为股票列表添加次日收益字段（close_change已经在策略中计算）\r\n        stockList.value = result.stocks.map(stock => ({\r\n          ...stock,\r\n          next_day_return: null, // 预留字段，后续计算\r\n          next_day_close: null   // 次日收盘涨跌幅，预留字段\r\n        }))\r\n\r\n        ElMessage.success(\r\n          `获取到 ${result.originalCount} 只股票，过滤后 ${result.filteredCount} 只符合3%-5%竞价涨跌幅条件`\r\n        )\r\n      } catch (error) {\r\n        console.error('竞价选股策略执行失败:', error)\r\n        ElMessage.error(`回测失败: ${error.message}`)\r\n        stockList.value = []\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    // 日期变化处理\r\n    const onDateChange = (date) => {\r\n      if (date) {\r\n        // 自动查询数据\r\n        fetchBacktestData()\r\n      }\r\n    }\r\n\r\n    // 格式化市值\r\n    const formatMarketCap = (value) => {\r\n      if (value === null || value === undefined) return '--'\r\n      const num = parseFloat(value)\r\n      if (isNaN(num)) return '--'\r\n      return (num / 100000000).toFixed(2) // 转换为亿元\r\n    }\r\n\r\n\r\n    // 获取收益率样式类\r\n    const getReturnClass = (returnValue) => {\r\n      const num = parseFloat(returnValue)\r\n      if (isNaN(num)) return ''\r\n      if (num > 0) return 'positive-return'\r\n      if (num < 0) return 'negative-return'\r\n      return 'zero-return'\r\n    }\r\n\r\n    // 处理股票点击事件，跳转到分时图\r\n    const handleStockClick = (stock) => {\r\n      try {\r\n        // 第一个参数：当前点击的股票代码（不带市场ID）\r\n        // 第二个参数：整个表格的所有股票代码数组\r\n        const allStockCodes = stockList.value.map(item => item.code)\r\n\r\n        jumpToQuote(stock.code, allStockCodes)\r\n\r\n        ElMessage.success(`正在跳转到 ${stock.name}(${stock.code}) 的分时图`)\r\n      } catch (error) {\r\n        console.error('跳转分时图失败:', error)\r\n        ElMessage.error('跳转分时图失败，请检查API连接')\r\n      }\r\n    }\r\n\r\n    // 保存选股结果\r\n    const saveStockPickResults = async () => {\r\n      if (!stockList.value || stockList.value.length === 0) {\r\n        ElMessage.warning('没有可保存的选股结果')\r\n        return\r\n      }\r\n\r\n      if (!selectedDate.value) {\r\n        ElMessage.warning('缺少回测日期信息')\r\n        return\r\n      }\r\n\r\n      saving.value = true\r\n\r\n      try {\r\n        // 根据新的API接口格式转换数据\r\n        const stockListData = stockList.value.map(stock => ({\r\n          code: stock.code,\r\n          name: stock.name,\r\n          status: 0, // 固定值 0\r\n          message: '集合竞价选股法',\r\n          buy_point: stock.reason_type || '集合竞价买入' // 使用选股原因作为买入点，如果没有则使用默认值\r\n        }))\r\n\r\n        // 构造新的请求数据结构\r\n        const requestData = {\r\n          date: selectedDate.value,\r\n          type: 2, // 固定值 2\r\n          stockList: stockListData\r\n        }\r\n\r\n        // 调用保存API\r\n        const response = await axios.post('https://www.wttiao.com/moni/ztpool/stock-pick/batch', requestData, {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          timeout: 10000 // 10秒超时\r\n        })\r\n\r\n        if (response.status === 200) {\r\n          ElMessage.success(`成功保存 ${stockListData.length} 只股票的选股结果`)\r\n        } else {\r\n          throw new Error(`API返回状态码: ${response.status}`)\r\n        }\r\n      } catch (error) {\r\n        console.error('保存选股结果失败:', error)\r\n\r\n        if (error.code === 'ECONNREFUSED') {\r\n          ElMessage.error('连接失败：请确保后端服务运行在 localhost:3000')\r\n        } else if (error.message.includes('timeout')) {\r\n          ElMessage.error('保存超时，请稍后重试')\r\n        } else if (error.response) {\r\n          ElMessage.error(`保存失败：${error.response.data?.message || error.response.statusText}`)\r\n        } else {\r\n          ElMessage.error(`保存失败：${error.message}`)\r\n        }\r\n      } finally {\r\n        saving.value = false\r\n      }\r\n    }\r\n\r\n    return {\r\n      selectedDate,\r\n      loading,\r\n      stockList,\r\n      saving,\r\n      successCount,\r\n      validCount,\r\n      successRate,\r\n      fetchBacktestData,\r\n      onDateChange,\r\n      formatMarketCap,\r\n      getReturnClass,\r\n      handleStockClick,\r\n      saveStockPickResults\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.backtest-container {\r\n  padding: 24px;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\r\n  min-height: 100vh;\r\n}\r\n\r\n.page-header {\r\n  margin-bottom: 32px;\r\n  padding: 32px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 16px;\r\n  color: white;\r\n  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.header-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.header-icon {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 12px;\r\n  border-radius: 12px;\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.header-text h2 {\r\n  margin: 0 0 8px 0;\r\n  font-size: 28px;\r\n  font-weight: 600;\r\n  color: white;\r\n}\r\n\r\n.page-description {\r\n  margin: 0;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  font-size: 16px;\r\n  opacity: 0.9;\r\n}\r\n\r\n.controls-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.controls-card {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 24px;\r\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 16px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.card-title {\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  color: #303133;\r\n}\r\n\r\n.card-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 500;\r\n  color: #303133;\r\n  white-space: nowrap;\r\n  min-width: 80px;\r\n}\r\n\r\n.form-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex: 1;\r\n}\r\n\r\n.strategy-info {\r\n  display: flex;\r\n  gap: 12px;\r\n  padding-top: 16px;\r\n  border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.results-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.results-card {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 24px;\r\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.results-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.results-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.results-title h3 {\r\n  margin: 0;\r\n  color: #303133;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 16px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.stat-card {\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  text-align: center;\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.stat-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.stat-value {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  color: #303133;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.success-rate-value {\r\n  color: #67c23a;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  font-weight: 500;\r\n}\r\n\r\n.table-container {\r\n  background: white;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.stock-table {\r\n  width: 100%;\r\n}\r\n\r\n:deep(.el-table) {\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n\r\n:deep(.el-table__header-wrapper) {\r\n  border-radius: 0;\r\n}\r\n\r\n:deep(.el-table__body-wrapper) {\r\n  border-radius: 0;\r\n}\r\n\r\n:deep(.el-table tr) {\r\n  background-color: transparent;\r\n}\r\n\r\n:deep(.el-table--striped .el-table__body tr.el-table__row--striped td) {\r\n  background: rgba(0, 0, 0, 0.02);\r\n}\r\n\r\n:deep(.el-table td, .el-table th) {\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.reason-text {\r\n  word-wrap: break-word;\r\n  word-break: break-all;\r\n  line-height: 1.4;\r\n  color: #606266;\r\n  font-size: 13px;\r\n  padding: 4px 0;\r\n}\r\n\r\n.positive-return {\r\n  color: #f56c6c;\r\n  font-weight: 600;\r\n  background: linear-gradient(135deg, rgba(245, 108, 108, 0.1) 0%, rgba(245, 108, 108, 0.05) 100%);\r\n  padding: 2px 6px;\r\n  border-radius: 6px;\r\n  font-size: 13px;\r\n}\r\n\r\n.negative-return {\r\n  color: #67c23a;\r\n  font-weight: 600;\r\n  background: linear-gradient(135deg, rgba(103, 194, 58, 0.1) 0%, rgba(103, 194, 58, 0.05) 100%);\r\n  padding: 2px 6px;\r\n  border-radius: 6px;\r\n  font-size: 13px;\r\n}\r\n\r\n.zero-return {\r\n  color: #909399;\r\n  font-weight: 500;\r\n  padding: 2px 6px;\r\n  border-radius: 6px;\r\n  background: rgba(144, 147, 153, 0.1);\r\n  font-size: 13px;\r\n}\r\n\r\n.no-data {\r\n  color: #c0c4cc;\r\n  font-style: italic;\r\n}\r\n\r\n/* 股票信息样式 */\r\n.stock-info {\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n  background: linear-gradient(135deg, rgba(64, 158, 255, 0.05) 0%, rgba(64, 158, 255, 0.02) 100%);\r\n  border: 1px solid rgba(64, 158, 255, 0.1);\r\n}\r\n\r\n.stock-info:hover {\r\n  background: linear-gradient(135deg, rgba(64, 158, 255, 0.15) 0%, rgba(64, 158, 255, 0.08) 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2);\r\n  border-color: rgba(64, 158, 255, 0.3);\r\n}\r\n\r\n.stock-info:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n.stock-code {\r\n  color: #409eff;\r\n  font-weight: 700;\r\n  font-size: 13px;\r\n  margin-bottom: 2px;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.stock-name {\r\n  color: #606266;\r\n  font-size: 12px;\r\n  line-height: 1.2;\r\n  font-weight: 500;\r\n}\r\n\r\n.stock-info:hover .stock-code {\r\n  color: #66b1ff;\r\n  text-decoration: underline;\r\n}\r\n\r\n.stock-info:hover .stock-name {\r\n  color: #409eff;\r\n}\r\n\r\n.no-data-message,\r\n.welcome-message {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  background: white;\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n:deep(.el-empty__description p) {\r\n  color: #606266;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 1024px) {\r\n  .stats-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .backtest-container {\r\n    padding: 16px;\r\n  }\r\n\r\n  .page-header {\r\n    padding: 24px;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  .header-content {\r\n    flex-direction: column;\r\n    text-align: center;\r\n    gap: 12px;\r\n  }\r\n\r\n  .header-text h2 {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .controls-card,\r\n  .results-card {\r\n    padding: 20px;\r\n  }\r\n\r\n  .form-row {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n  }\r\n\r\n  .form-label {\r\n    min-width: auto;\r\n  }\r\n\r\n  .form-controls {\r\n    width: 100%;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n  }\r\n\r\n  .form-controls .el-date-editor,\r\n  .form-controls .el-button {\r\n    width: 100%;\r\n  }\r\n\r\n  .strategy-info {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n\r\n  .results-header {\r\n    flex-direction: column;\r\n    gap: 16px;\r\n    align-items: flex-start;\r\n  }\r\n\r\n  .header-actions {\r\n    width: 100%;\r\n  }\r\n\r\n  .header-actions .el-button {\r\n    width: 100%;\r\n  }\r\n\r\n  .stats-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 12px;\r\n  }\r\n\r\n  .stat-card {\r\n    padding: 16px;\r\n  }\r\n\r\n  .stat-value {\r\n    font-size: 20px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .backtest-container {\r\n    padding: 12px;\r\n  }\r\n\r\n  .page-header {\r\n    padding: 20px;\r\n  }\r\n\r\n  .header-text h2 {\r\n    font-size: 20px;\r\n  }\r\n\r\n  .page-description {\r\n    font-size: 14px;\r\n  }\r\n\r\n  .controls-card,\r\n  .results-card {\r\n    padding: 16px;\r\n  }\r\n}\r\n</style>"],"names":["_sfc_main","TrendCharts","Calendar","Search","DataAnalysis","Download","selectedDate","ref","loading","stockList","saving","successStats","computed","validStocks","stock","validCount","successCount","successRate","fetchBacktestData","ElMessage","result","executeAuctionPreselect","message","progress","error","date","value","num","returnValue","allStockCodes","item","jumpToQuote","stockListData","requestData","response","axios","_a","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_29","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_el_icon","_component_TrendCharts","_component_Calendar","_cache","_component_el_date_picker","$setup","$event","_component_el_button","_component_Search","_createTextVNode","_component_el_tag","_hoisted_12","_component_DataAnalysis","_createBlock","_component_Download","_toDisplayString","_hoisted_22","_component_el_table","_component_el_table_column","_withCtx","row","_normalizeClass","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_component_el_empty","_hoisted_35"],"mappings":"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"}