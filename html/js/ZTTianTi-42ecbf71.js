import{_ as w,k as z,c as p,B as T,o as n,g as l,b as o,F as i,i as d,R as v,f as r,n as D,j as f}from"./index-9957a136.js";const x={class:"zt-tian-ti-new"},$={class:"zt-stats-bar"},B={class:"zt-stat-label"},E={class:"zt-stat-value"},C={class:"zt-tian-ti-content-new"},Z={key:0,class:"zt-loading"},F={key:1,class:"zt-empty"},L={key:2,class:"zt-tian-ti-table-new"},M={class:"zt-tier-label"},N={class:"zt-tier-main"},O={class:"zt-tier-stocks"},R={class:"zt-stock-header"},S={class:"zt-stock-name"},V={key:0,class:"zt-yizi-tag"},I={class:"zt-stock-tags"},q={class:"zt-stock-meta"},A={class:"zt-stock-time"},G={key:0,class:"zt-stock-time"},H={class:"zt-stock-extra"},J={key:0,class:"zt-stock-extra-label"},K={__name:"ZTTianTi",setup(P){const u=z(!1),_=z([]),b=p(()=>{const t=[{label:"泛金融",value:0,bg:"#f56c6c",color:"#fff"},{label:"稀土",value:0,bg:"#ff9800",color:"#fff"},{label:"光伏",value:0,bg:"#e0f7fa",color:"#333"},{label:"医药",value:0,bg:"#e1bee7",color:"#333"},{label:"金属",value:0,bg:"#ffe082",color:"#333"},{label:"地产基建",value:0,bg:"#bdbdbd",color:"#333"},{label:"军工",value:0,bg:"#b0bec5",color:"#333"},{label:"氢能",value:0,bg:"#b2dfdb",color:"#333"}];return _.value.forEach(s=>{s.reason_type&&s.reason_type.includes("泛金融")&&t[0].value++,s.reason_type&&s.reason_type.includes("稀土")&&t[1].value++,s.reason_type&&s.reason_type.includes("光伏")&&t[2].value++,s.reason_type&&s.reason_type.includes("医药")&&t[3].value++,s.reason_type&&s.reason_type.includes("金属")&&t[4].value++,s.reason_type&&s.reason_type.includes("地产基建")&&t[5].value++,s.reason_type&&s.reason_type.includes("军工")&&t[6].value++,s.reason_type&&s.reason_type.includes("氢能")&&t[7].value++}),t.filter(s=>s.value>0)}),g=async()=>{u.value=!0;try{const a=await(await fetch("https://www.wttiao.com/moni/ztpool/get?startDate=2025-07-11&endDate=2025-07-13")).json();a.code===0&&(a.data.forEach(c=>{c.yizi=c.yz_flag===1||c.yz_flag===void 0&&c.name&&c.name.includes("一字")}),_.value=a.data||[])}catch{}finally{u.value=!1}},h=p(()=>{const t={};return _.value.forEach(s=>{if(s.zttj_days===s.zttj_ct&&s.zttj_days>1){const e=s.zttj_days;t[e]||(t[e]={zttj_days:e,stocks:[]}),t[e].stocks.push(s)}}),Object.values(t).sort((s,e)=>e.zttj_days-s.zttj_days)}),k=t=>t?t.split("+").filter(s=>s.trim()):[],j=t=>{const s={泛金融:"#f56c6c",稀土:"#ff9800",光伏:"#7ec6f3",医药:"#b388ff",金属:"#ffd54f",地产基建:"#bdbdbd",军工:"#90a4ae",氢能:"#80cbc4",公告:"#e0e0e0",一字:"#e040fb"};for(const[e,a]of Object.entries(s))if(t.includes(e))return a;return"#e0e0e0"},y=t=>{if(!t)return"";const s=t.toString();return s.length===5?`${s.slice(0,2)}:${s.slice(2,4)}:${s.slice(4)}`:t};return T(()=>{g()}),(t,s)=>(n(),l("div",x,[o("div",$,[(n(!0),l(i,null,d(b.value,e=>(n(),l("div",{key:e.label,class:"zt-stat-tag",style:v({background:e.bg,color:e.color})},[o("span",B,r(e.label)+":",1),o("span",E,r(e.value),1)],4))),128))]),o("div",C,[u.value?(n(),l("div",Z,s[0]||(s[0]=[o("span",{class:"zt-loading-spinner"},null,-1),o("span",null,"数据加载中...",-1)]))):_.value.length?(n(),l("div",L,[(n(!0),l(i,null,d(h.value,e=>(n(),l("div",{key:e.zttj_days,class:"zt-tier-row"},[o("div",M,[o("span",N,r(e.zttj_days===1?"首板":e.zttj_days+"板"),1)]),o("div",O,[(n(!0),l(i,null,d(e.stocks,a=>(n(),l("div",{key:a.id,class:D(["zt-stock-card",{"zt-stock-yizi":a.yizi}])},[o("div",R,[o("span",S,r(a.name),1),a.yizi?(n(),l("span",V,"一字")):f("",!0)]),o("div",I,[(n(!0),l(i,null,d(k(a.reason_type),c=>(n(),l("span",{key:c,class:"zt-reason-tag",style:v({background:j(c)})},r(c),5))),128))]),o("div",q,[o("span",A,r(y(a.first_zt_time)),1),a.last_zt_time&&a.last_zt_time!==a.first_zt_time?(n(),l("span",G,r(y(a.last_zt_time)),1)):f("",!0)]),o("div",H,[a.extra?(n(),l("span",J,r(a.extra),1)):f("",!0)])],2))),128))])]))),128))])):(n(),l("div",F,s[1]||(s[1]=[o("span",null,"暂无数据",-1)])))])]))}},U=w(K,[["__scopeId","data-v-86818072"]]);export{U as default};
//# sourceMappingURL=ZTTianTi-42ecbf71.js.map
