{"version":3,"file":"WindowControl-0a7b3049.js","sources":["../../front/src/utils/webSearchService.js","../../front/src/views/WindowControl.vue"],"sourcesContent":["/**\r\n * ÁΩëÁªúÊêúÁ¥¢ÊúçÂä°\r\n * Áî®‰∫éËÇ°Á•®Ë¥üÈù¢Ê∂àÊÅØÊêúÁ¥¢\r\n */\r\n\r\nimport { WEB_SEARCH_CONFIG } from '../services/llmConfig.js'\r\n\r\n/**\r\n * ÁΩëÁªúÊêúÁ¥¢Á±ª\r\n */\r\nexport class WebSearch {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.cacheTimeout = 10 * 60 * 1000 // 10ÂàÜÈíüÁºìÂ≠ò\r\n    this.configKey = 'web_search_config' // localStorageÈÖçÁΩÆÈîÆ\r\n    this.config = this.loadConfig()\r\n  }\r\n\r\n  /**\r\n   * ÊêúÁ¥¢ËÇ°Á•®Ë¥üÈù¢Ê∂àÊÅØ\r\n   * @param {string} stockCode ËÇ°Á•®‰ª£Á†Å\r\n   * @param {string} stockName ËÇ°Á•®ÂêçÁß∞\r\n   * @param {number} monthsBack ÊêúÁ¥¢Êó∂Èó¥ËåÉÂõ¥ÔºàÊúàÔºâ\r\n   * @returns {Promise<Object>} ÊêúÁ¥¢ÁªìÊûú\r\n   */\r\n  async searchNegativeNews(stockCode, stockName, monthsBack = 1) {\r\n    const cacheKey = `negative_news_${stockCode}_${monthsBack}`\r\n    \r\n    // Ê£ÄÊü•ÁºìÂ≠ò\r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey)\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(`‰ΩøÁî®ÁºìÂ≠òÁöÑË¥üÈù¢Ê∂àÊÅØÊï∞ÊçÆ: ${stockName}(${stockCode})`)\r\n        return cached.data\r\n      }\r\n    }\r\n\r\n    try {\r\n      console.log(`ÂºÄÂßãÊêúÁ¥¢ ${stockName}(${stockCode}) ÁöÑË¥üÈù¢Ê∂àÊÅØ...`)\r\n      \r\n      // ÊûÑÈÄ†ÊêúÁ¥¢ÂÖ≥ÈîÆËØç\r\n      const searchQueries = this.generateSearchQueries(stockCode, stockName, monthsBack)\r\n      \r\n      // ÊâßË°åÂ§ö‰∏™ÊêúÁ¥¢Êü•ËØ¢\r\n      const searchResults = []\r\n      for (const query of searchQueries) {\r\n        try {\r\n          const result = await this.performWebSearch(query)\r\n          if (result && result.length > 0) {\r\n            searchResults.push(...result)\r\n          }\r\n          // Ê∑ªÂä†Âª∂ËøüÈÅøÂÖçËØ∑Ê±ÇËøáÂø´\r\n          await this.delay(500)\r\n        } catch (error) {\r\n          console.warn(`ÊêúÁ¥¢Êü•ËØ¢Â§±Ë¥•: ${query}`, error)\r\n        }\r\n      }\r\n\r\n      // Â§ÑÁêÜÂíåËøáÊª§ÊêúÁ¥¢ÁªìÊûú\r\n      const processedNews = this.processSearchResults(searchResults, stockCode, stockName, monthsBack)\r\n      \r\n      // ÁºìÂ≠òÁªìÊûú\r\n      const result = {\r\n        stockCode,\r\n        stockName,\r\n        monthsBack,\r\n        totalResults: processedNews.length,\r\n        negativeNews: processedNews,\r\n        searchTime: new Date().toISOString(),\r\n        summary: this.generateSummary(processedNews)\r\n      }\r\n\r\n      this.cache.set(cacheKey, {\r\n        data: result,\r\n        timestamp: Date.now()\r\n      })\r\n\r\n      console.log(`${stockName}(${stockCode}) Ë¥üÈù¢Ê∂àÊÅØÊêúÁ¥¢ÂÆåÊàê: ÊâæÂà∞ ${processedNews.length} Êù°Áõ∏ÂÖ≥Ê∂àÊÅØ`)\r\n      return result\r\n\r\n    } catch (error) {\r\n      console.error(`ÊêúÁ¥¢ ${stockName}(${stockCode}) Ë¥üÈù¢Ê∂àÊÅØÂ§±Ë¥•:`, error)\r\n      return {\r\n        stockCode,\r\n        stockName,\r\n        monthsBack,\r\n        totalResults: 0,\r\n        negativeNews: [],\r\n        searchTime: new Date().toISOString(),\r\n        summary: 'ÊêúÁ¥¢Â§±Ë¥•ÔºöÊó†Ê≥ïËé∑ÂèñË¥üÈù¢Ê∂àÊÅØ‰ø°ÊÅØ',\r\n        error: error.message\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÁîüÊàêÊêúÁ¥¢ÂÖ≥ÈîÆËØç\r\n   */\r\n  generateSearchQueries(stockCode, stockName, monthsBack) {\r\n    const timeFilter = this.getTimeFilter(monthsBack)\r\n    const queries = [\r\n      `${stockName} Ë¥üÈù¢Ê∂àÊÅØ ÈóÆÈ¢ò È£éÈô© ${timeFilter}`,\r\n      `${stockName} ${stockCode} ËøùËßÑ Â§ÑÁΩö Ë∞ÉÊü• ${timeFilter}`,\r\n      `${stockName} ‰∏öÁª© ‰∏ãÊªë ‰∫èÊçü Âç±Êú∫ ${timeFilter}`,\r\n      `${stockName} ËØâËÆº Á∫†Á∫∑ ‰∫âËÆÆ ${timeFilter}`,\r\n      `${stockName} ÂÅúÁâå ÈÄÄÂ∏Ç Ë≠¶Á§∫ ${timeFilter}`,\r\n    ]\r\n    return queries\r\n  }\r\n\r\n  /**\r\n   * Ëé∑ÂèñÊó∂Èó¥ËøáÊª§Âô®\r\n   */\r\n  getTimeFilter(monthsBack) {\r\n    const now = new Date()\r\n    const pastDate = new Date(now.getFullYear(), now.getMonth() - monthsBack, now.getDate())\r\n    \r\n    if (monthsBack === 1) {\r\n      return 'ÊúÄËøë‰∏Ä‰∏™Êúà'\r\n    } else if (monthsBack === 3) {\r\n      return 'ÊúÄËøë‰∏â‰∏™Êúà'\r\n    } else {\r\n      return `${pastDate.getFullYear()}Âπ¥${pastDate.getMonth() + 1}Êúà‰ª•Êù•`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÊâßË°åÁΩëÁªúÊêúÁ¥¢\r\n   * ‰ΩøÁî® Moonshot API ËøõË°åËÅîÁΩëÊêúÁ¥¢\r\n   */\r\n  async performWebSearch(query) {\r\n    try {\r\n      console.log(`ÊâßË°åÊêúÁ¥¢: ${query}`)\r\n      \r\n      // ‰ΩøÁî® Moonshot API ËøõË°åËÅîÁΩëÊêúÁ¥¢\r\n      const searchResults = await this.performRealWebSearch(query)\r\n      if (searchResults && searchResults.length > 0) {\r\n        return searchResults\r\n      }\r\n      \r\n      // Â¶ÇÊûúÊêúÁ¥¢Â§±Ë¥•ÔºåËøîÂõûÁ©∫ÁªìÊûú\r\n      console.log('Moonshot API ÊêúÁ¥¢Êú™ËøîÂõûÁªìÊûú')\r\n      return []\r\n      \r\n    } catch (error) {\r\n      console.error('ÁΩëÁªúÊêúÁ¥¢ÊâßË°åÂ§±Ë¥•:', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ‰ΩøÁî® Moonshot API ËøõË°åÁΩëÁªúÊêúÁ¥¢\r\n   */\r\n  async performRealWebSearch(query) {\r\n    try {\r\n      console.log(`‰ΩøÁî® Moonshot API ÊêúÁ¥¢: ${query}`)\r\n      \r\n      // ‰ΩøÁî® Moonshot API ËøõË°åËÅîÁΩëÊêúÁ¥¢\r\n      const searchResult = await this.searchWithMoonshot(query)\r\n      \r\n      if (searchResult && searchResult.length > 0) {\r\n        return searchResult\r\n      }\r\n      \r\n      console.warn('Moonshot ÊêúÁ¥¢Êú™ËøîÂõûÁªìÊûú')\r\n      return []\r\n      \r\n    } catch (error) {\r\n      console.warn('Moonshot API ÊêúÁ¥¢Â§±Ë¥•:', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ‰ΩøÁî® Moonshot API ËøõË°åËÅîÁΩëÊêúÁ¥¢\r\n   */\r\n  async searchWithMoonshot(query) {\r\n    try {\r\n      // ‰ªéÈÖçÁΩÆ‰∏≠Ëé∑Âèñ API Key\r\n      const apiKey = this.config.moonshotApiKey\r\n      \r\n      if (!apiKey || apiKey === 'sk-your-moonshot-api-key' || apiKey === '') {\r\n        console.warn('Moonshot API Key Êú™ÈÖçÁΩÆÔºåË∑≥ËøáËÅîÁΩëÊêúÁ¥¢')\r\n        return []\r\n      }\r\n\r\n      const messages = [\r\n        { \r\n          \"role\": \"system\", \r\n          \"content\": \"‰Ω†ÊòØ‰∏ì‰∏öÁöÑË¥¢Áªè‰ø°ÊÅØÊêúÁ¥¢Âä©Êâã„ÄÇËØ∑ÊêúÁ¥¢Áî®Êà∑ÊåáÂÆöÁöÑËÇ°Á•®Ë¥üÈù¢Ê∂àÊÅØÔºåÂπ∂‰ª•JSONÊ†ºÂºèËøîÂõûÁªìÊûú„ÄÇÊØèÊù°Ê∂àÊÅØÂåÖÂê´title„ÄÅcontent„ÄÅurl„ÄÅsource„ÄÅpublishTime„ÄÅrelevanceÂ≠óÊÆµ„ÄÇ\" \r\n        },\r\n        { \r\n          \"role\": \"user\", \r\n          \"content\": `ËØ∑ÊêúÁ¥¢ÂÖ≥‰∫é\"${query}\"ÁöÑË¥üÈù¢Ê∂àÊÅØÂíåÈ£éÈô©‰ø°ÊÅØÔºåËøîÂõûÊúÄÊñ∞ÁöÑ3-5Êù°Áõ∏ÂÖ≥Êñ∞Èóª` \r\n        }\r\n      ]\r\n\r\n      const tools = [\r\n        {\r\n          \"type\": \"builtin_function\",\r\n          \"function\": {\r\n            \"name\": \"$web_search\"\r\n          }\r\n        }\r\n      ]\r\n\r\n      let finishReason = null\r\n      let searchResults = []\r\n\r\n      // Âæ™ÁéØÂ§ÑÁêÜÂ∑•ÂÖ∑Ë∞ÉÁî®\r\n      while (finishReason === null || finishReason === \"tool_calls\") {\r\n        const response = await fetch('https://api.moonshot.cn/v1/chat/completions', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${apiKey}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            model: \"kimi-k2-0905-preview\",\r\n            messages: messages,\r\n            temperature: 0.3,\r\n            tools: tools\r\n          })\r\n        })\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Moonshot API ËØ∑Ê±ÇÂ§±Ë¥•: ${response.status}`)\r\n        }\r\n\r\n        const completion = await response.json()\r\n        const choice = completion.choices[0]\r\n        finishReason = choice.finish_reason\r\n\r\n        if (finishReason === \"tool_calls\") {\r\n          messages.push(choice.message)\r\n          \r\n          for (const toolCall of choice.message.tool_calls) {\r\n            const toolCallName = toolCall.function.name\r\n            const toolCallArguments = JSON.parse(toolCall.function.arguments)\r\n            \r\n            let toolResult = {}\r\n            if (toolCallName === \"$web_search\") {\r\n              // Moonshot ÂÜÖÁΩÆÁöÑËÅîÁΩëÊêúÁ¥¢Â∑•ÂÖ∑‰ºöËá™Âä®ÊâßË°å\r\n              toolResult = toolCallArguments\r\n            } else {\r\n              toolResult = { error: 'no tool found' }\r\n            }\r\n\r\n            messages.push({\r\n              \"role\": \"tool\",\r\n              \"tool_call_id\": toolCall.id,\r\n              \"name\": toolCallName,\r\n              \"content\": JSON.stringify(toolResult)\r\n            })\r\n          }\r\n        } else {\r\n          // Â§ÑÁêÜÊúÄÁªàÂõûÂ§çÔºåÊèêÂèñÊêúÁ¥¢ÁªìÊûú\r\n          const content = choice.message.content\r\n          console.log('Moonshot ÊêúÁ¥¢ÁªìÊûú:', content)\r\n          \r\n          // Â∞ùËØï‰ªéÂõûÂ§ç‰∏≠ÊèêÂèñÁªìÊûÑÂåñÁöÑÊêúÁ¥¢ÁªìÊûú\r\n          searchResults = this.parseSearchResultsFromAI(content, query)\r\n          break\r\n        }\r\n      }\r\n\r\n      return searchResults\r\n\r\n    } catch (error) {\r\n      console.error('Moonshot API Ë∞ÉÁî®Â§±Ë¥•:', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ‰ªé AI ÂõûÂ§ç‰∏≠Ëß£ÊûêÊêúÁ¥¢ÁªìÊûú\r\n   */\r\n  parseSearchResultsFromAI(content, query) {\r\n    try {\r\n      // Â∞ùËØïÊèêÂèñ JSON Ê†ºÂºèÁöÑÁªìÊûú\r\n      const jsonMatch = content.match(/\\[[\\s\\S]*\\]/)\r\n      if (jsonMatch) {\r\n        const results = JSON.parse(jsonMatch[0])\r\n        return this.convertAISearchResults(results)\r\n      }\r\n      \r\n      // Â¶ÇÊûúÊ≤°ÊúâJSONÊ†ºÂºèÔºåÂàôÂàõÂª∫Âü∫‰∫éÊñáÊú¨ÂÜÖÂÆπÁöÑÁªìÊûú\r\n      const stockName = query.split(' ')[0]\r\n      return [{\r\n        title: `${stockName}Áõ∏ÂÖ≥‰ø°ÊÅØÊêúÁ¥¢ÁªìÊûú`,\r\n        content: content.substring(0, 500),\r\n        url: '',\r\n        source: 'Moonshot AI ÊêúÁ¥¢',\r\n        publishTime: new Date().toISOString(),\r\n        relevance: 0.8\r\n      }]\r\n\r\n    } catch (error) {\r\n      console.warn('Ëß£Êûê AI ÊêúÁ¥¢ÁªìÊûúÂ§±Ë¥•:', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ËΩ¨Êç¢ AI ÊêúÁ¥¢ÁªìÊûúÊ†ºÂºè\r\n   */\r\n  convertAISearchResults(results) {\r\n    if (!Array.isArray(results)) {\r\n      return []\r\n    }\r\n\r\n    return results.map(item => ({\r\n      title: item.title || '',\r\n      content: item.content || item.description || '',\r\n      url: item.url || '',\r\n      source: item.source || 'AIÊêúÁ¥¢',\r\n      publishTime: item.publishTime || item.date || new Date().toISOString(),\r\n      relevance: item.relevance || 0.7\r\n    }))\r\n  }\r\n\r\n\r\n  /**\r\n   * Â§ÑÁêÜÊêúÁ¥¢ÁªìÊûú\r\n   */\r\n  processSearchResults(results, stockCode, stockName, monthsBack = 1) {\r\n    if (!results || results.length === 0) {\r\n      return []\r\n    }\r\n\r\n    return results\r\n      .filter(item => item && item.title && item.content)\r\n      .filter(item => this.isRelevantNews(item, stockCode, stockName))\r\n      .filter(item => this.isNegativeNews(item))\r\n      .filter(item => this.isWithinTimeRange(item, monthsBack)) // Ê∑ªÂä†Êó∂Èó¥ËåÉÂõ¥ËøáÊª§\r\n      .sort((a, b) => (b.relevance || 0) - (a.relevance || 0))\r\n      .slice(0, 10) // ÊúÄÂ§öËøîÂõû10Êù°ÊúÄÁõ∏ÂÖ≥ÁöÑË¥üÈù¢Ê∂àÊÅØ\r\n      .map(item => ({\r\n        title: item.title,\r\n        summary: item.content.substring(0, 200) + (item.content.length > 200 ? '...' : ''),\r\n        url: item.url,\r\n        publishTime: item.publishTime,\r\n        source: item.source,\r\n        relevance: item.relevance,\r\n        negativeKeywords: this.extractNegativeKeywords(item.content)\r\n      }))\r\n  }\r\n\r\n  /**\r\n   * Âà§Êñ≠Êñ∞ÈóªÊòØÂê¶Âú®Êó∂Èó¥ËåÉÂõ¥ÂÜÖ\r\n   */\r\n  isWithinTimeRange(item, monthsBack) {\r\n    try {\r\n      if (!item.publishTime) {\r\n        // Â¶ÇÊûúÊ≤°ÊúâÂèëÂ∏ÉÊó∂Èó¥ÔºåÈªòËÆ§ËÆ§‰∏∫ÊòØÊúÄËøëÁöÑÊ∂àÊÅØ\r\n        return true\r\n      }\r\n\r\n      const publishDate = this.parsePublishTime(item.publishTime)\r\n      const now = new Date()\r\n      const cutoffDate = new Date()\r\n      cutoffDate.setMonth(cutoffDate.getMonth() - monthsBack)\r\n\r\n      // Ê£ÄÊü•Êó•ÊúüÊòØÂê¶ÊúâÊïà\r\n      if (isNaN(publishDate.getTime())) {\r\n        console.warn('Êó†ÊïàÁöÑÂèëÂ∏ÉÊó∂Èó¥:', item.publishTime)\r\n        return true // Êó†ÊïàÊó∂Èó¥ÈªòËÆ§ÈÄöËøá\r\n      }\r\n\r\n      const isWithinRange = publishDate >= cutoffDate && publishDate <= now\r\n      \r\n      if (!isWithinRange) {\r\n        console.log(`Ê∂àÊÅØË∂ÖÂá∫Êó∂Èó¥ËåÉÂõ¥: ${item.title} - ÂèëÂ∏ÉÊó∂Èó¥: ${item.publishTime}`)\r\n      }\r\n      \r\n      return isWithinRange\r\n    } catch (error) {\r\n      console.warn('Êó∂Èó¥ËåÉÂõ¥Ê£ÄÊü•Â§±Ë¥•:', error, item.publishTime)\r\n      return true // Âá∫ÈîôÊó∂ÈªòËÆ§ÈÄöËøá\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ëß£ÊûêÂèëÂ∏ÉÊó∂Èó¥ÔºåÊîØÊåÅÂ§öÁßçÊ†ºÂºè\r\n   */\r\n  parsePublishTime(publishTime) {\r\n    if (!publishTime) {\r\n      return new Date()\r\n    }\r\n\r\n    // Â∞ùËØïÁõ¥Êé•Ëß£ÊûêISOÊ†ºÂºèÂíåÊ†áÂáÜÊ†ºÂºè\r\n    let date = new Date(publishTime)\r\n    if (!isNaN(date.getTime())) {\r\n      return date\r\n    }\r\n\r\n    // Â∞ùËØïËß£Êûê‰∏≠ÊñáÊ†ºÂºèÔºöYYYYÂπ¥MMÊúàDDÊó•\r\n    const chineseDateMatch = publishTime.match(/(\\d{4})Âπ¥(\\d{1,2})Êúà(\\d{1,2})Êó•/)\r\n    if (chineseDateMatch) {\r\n      const [, year, month, day] = chineseDateMatch\r\n      date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\r\n      if (!isNaN(date.getTime())) {\r\n        return date\r\n      }\r\n    }\r\n\r\n    // Â∞ùËØïËß£Êûê YYYY-MM-DD Ê†ºÂºè\r\n    const dashDateMatch = publishTime.match(/(\\d{4})-(\\d{1,2})-(\\d{1,2})/)\r\n    if (dashDateMatch) {\r\n      const [, year, month, day] = dashDateMatch\r\n      date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\r\n      if (!isNaN(date.getTime())) {\r\n        return date\r\n      }\r\n    }\r\n\r\n    // Â∞ùËØïËß£Êûê MM/DD/YYYY Ê†ºÂºè\r\n    const slashDateMatch = publishTime.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/)\r\n    if (slashDateMatch) {\r\n      const [, month, day, year] = slashDateMatch\r\n      date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\r\n      if (!isNaN(date.getTime())) {\r\n        return date\r\n      }\r\n    }\r\n\r\n    // Â¶ÇÊûúÈÉΩËß£ÊûêÂ§±Ë¥•ÔºåËøîÂõûÂΩìÂâçÊó∂Èó¥\r\n    console.warn('Êó†Ê≥ïËß£ÊûêÂèëÂ∏ÉÊó∂Èó¥Ê†ºÂºè:', publishTime)\r\n    return new Date()\r\n  }\r\n\r\n  /**\r\n   * Âà§Êñ≠Êñ∞ÈóªÊòØÂê¶Áõ∏ÂÖ≥\r\n   */\r\n  isRelevantNews(item, stockCode, stockName) {\r\n    const content = (item.title + ' ' + item.content).toLowerCase()\r\n    return content.includes(stockName) || content.includes(stockCode)\r\n  }\r\n\r\n  /**\r\n   * Âà§Êñ≠ÊòØÂê¶‰∏∫Ë¥üÈù¢Ê∂àÊÅØ\r\n   */\r\n  isNegativeNews(item) {\r\n    const negativeKeywords = [\r\n      'Ë¥üÈù¢', 'ÈóÆÈ¢ò', 'È£éÈô©', 'Âç±Êú∫', '‰∫èÊçü', '‰∏ãÊªë', 'ËøùËßÑ', 'Â§ÑÁΩö', \r\n      'Ë∞ÉÊü•', 'ËØâËÆº', 'Á∫†Á∫∑', '‰∫âËÆÆ', 'ÂÅúÁâå', 'ÈÄÄÂ∏Ç', 'Ë≠¶Á§∫', 'ÂáèÊåÅ',\r\n      '‰∏öÁª©‰∏ãÊªë', 'Ë¥¢Âä°Âç±Êú∫', 'ÂÄ∫Âä°Âç±Êú∫', 'ÁªèËê•Âõ∞Èöæ', 'ÁõëÁÆ°Â§ÑÁΩö'\r\n    ]\r\n    \r\n    const content = (item.title + ' ' + item.content).toLowerCase()\r\n    return negativeKeywords.some(keyword => content.includes(keyword))\r\n  }\r\n\r\n  /**\r\n   * ÊèêÂèñË¥üÈù¢ÂÖ≥ÈîÆËØç\r\n   */\r\n  extractNegativeKeywords(content) {\r\n    const negativeKeywords = [\r\n      'Ë¥üÈù¢', 'ÈóÆÈ¢ò', 'È£éÈô©', 'Âç±Êú∫', '‰∫èÊçü', '‰∏ãÊªë', 'ËøùËßÑ', 'Â§ÑÁΩö', \r\n      'Ë∞ÉÊü•', 'ËØâËÆº', 'Á∫†Á∫∑', '‰∫âËÆÆ', 'ÂÅúÁâå', 'ÈÄÄÂ∏Ç', 'Ë≠¶Á§∫', 'ÂáèÊåÅ'\r\n    ]\r\n    \r\n    return negativeKeywords.filter(keyword => \r\n      content.toLowerCase().includes(keyword)\r\n    )\r\n  }\r\n\r\n  /**\r\n   * ÁîüÊàêÊëòË¶Å\r\n   */\r\n  generateSummary(negativeNews) {\r\n    if (!negativeNews || negativeNews.length === 0) {\r\n      return 'Êú™ÂèëÁé∞ÊòéÊòæË¥üÈù¢Ê∂àÊÅØ'\r\n    }\r\n\r\n    const totalNews = negativeNews.length\r\n    const majorKeywords = {}\r\n    \r\n    negativeNews.forEach(news => {\r\n      if (news.negativeKeywords) {\r\n        news.negativeKeywords.forEach(keyword => {\r\n          majorKeywords[keyword] = (majorKeywords[keyword] || 0) + 1\r\n        })\r\n      }\r\n    })\r\n\r\n    const topKeywords = Object.entries(majorKeywords)\r\n      .sort(([,a], [,b]) => b - a)\r\n      .slice(0, 3)\r\n      .map(([keyword]) => keyword)\r\n\r\n    return `ÂèëÁé∞ ${totalNews} Êù°Ë¥üÈù¢Ê∂àÊÅØÔºå‰∏ªË¶ÅÊ∂âÂèäÔºö${topKeywords.join('„ÄÅ')}`\r\n  }\r\n\r\n  /**\r\n   * Âª∂ËøüÂáΩÊï∞\r\n   */\r\n  delay(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n\r\n  /**\r\n   * Ê∏ÖÈô§ÁºìÂ≠ò\r\n   */\r\n  clearCache() {\r\n    this.cache.clear()\r\n    console.log('Ë¥üÈù¢Ê∂àÊÅØÊêúÁ¥¢ÁºìÂ≠òÂ∑≤Ê∏ÖÈô§')\r\n  }\r\n\r\n\r\n  /**\r\n   * Âä†ËΩΩÈÖçÁΩÆ\r\n   */\r\n  loadConfig() {\r\n    // ‰ªéllmConfig.jsËØªÂèñÈÖçÁΩÆ\r\n    return WEB_SEARCH_CONFIG\r\n  }\r\n\r\n  /**\r\n   * Ëé∑Âèñ Moonshot API KeyÔºàËÑ±ÊïèÊòæÁ§∫Ôºâ\r\n   */\r\n  getMoonshotApiKey(masked = true) {\r\n    const apiKey = this.config.moonshotApiKey || ''\r\n    if (masked && apiKey.length > 8) {\r\n      return apiKey.substring(0, 8) + '***'\r\n    }\r\n    return apiKey\r\n  }\r\n\r\n  /**\r\n   * ÊµãËØï Moonshot API ËøûÊé•\r\n   */\r\n  async testMoonshotConnection() {\r\n    try {\r\n      const apiKey = this.config.moonshotApiKey\r\n      \r\n      if (!apiKey) {\r\n        throw new Error('API Key Êú™ÈÖçÁΩÆ')\r\n      }\r\n\r\n      const response = await fetch('https://api.moonshot.cn/v1/models', {\r\n        headers: {\r\n          'Authorization': `Bearer ${apiKey}`,\r\n        }\r\n      })\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        console.log('Moonshot API ËøûÊé•ÊµãËØïÊàêÂäü:', data)\r\n        return { success: true, message: 'API ËøûÊé•Ê≠£Â∏∏' }\r\n      } else {\r\n        throw new Error(`API ÂìçÂ∫îÈîôËØØ: ${response.status}`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Moonshot API ËøûÊé•ÊµãËØïÂ§±Ë¥•:', error)\r\n      return { success: false, message: error.message }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// ÂàõÂª∫ÂÖ®Â±ÄÂÆû‰æã\r\nexport const webSearchService = new WebSearch()\r\n\r\n// ÈªòËÆ§ÂØºÂá∫\r\nexport default webSearchService","<template>\r\n  <el-card class=\"window-control-card\">\r\n    <template #header>\r\n      <div class=\"card-header\">\r\n        <span class=\"title\">Window ÊéßÂà∂Ë∞ÉËØï</span>\r\n      </div>\r\n    </template>\r\n\r\n    <div class=\"api-list\">\r\n      <el-card\r\n        v-for=\"api in apis\"\r\n        :key=\"api.url\"\r\n        class=\"api-item\"\r\n        shadow=\"hover\"\r\n      >\r\n        <div class=\"api-content\">\r\n          <span class=\"api-label\">{{ api.label }}</span>\r\n          <el-input\r\n            v-model=\"api.url\"\r\n            class=\"api-url\"\r\n            readonly\r\n          >\r\n            <template #prepend>\r\n              <el-icon><Link /></el-icon>\r\n            </template>\r\n          </el-input>\r\n          <el-button\r\n            type=\"primary\"\r\n            :icon=\"loadingStates[api.url] ? Loading : Position\"\r\n            :loading=\"loadingStates[api.url]\"\r\n            @click=\"handleApiCall(api.url)\"\r\n          >\r\n            {{ loadingStates[api.url] ? 'ËØ∑Ê±Ç‰∏≠...' : 'ÊâßË°å' }}\r\n          </el-button>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- ÁΩëÁªúÊêúÁ¥¢‰∏ìÁî®ÊµãËØïÂå∫Âüü -->\r\n    <el-card class=\"search-test-section\" shadow=\"hover\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span class=\"title\">üîç ÁΩëÁªúÊêúÁ¥¢ÊµãËØï</span>\r\n        </div>\r\n      </template>\r\n      \r\n      <!-- API Áä∂ÊÄÅÂå∫Âüü -->\r\n      <div class=\"api-status\">\r\n        <el-tag type=\"success\" size=\"large\">\r\n          <el-icon><Check /></el-icon>\r\n          Moonshot API Â∑≤ÈÖçÁΩÆ: {{ apiConfig.currentKey }}\r\n        </el-tag>\r\n        <el-button type=\"success\" size=\"small\" @click=\"handleTestConnection\">\r\n          ÊµãËØïËøûÊé•\r\n        </el-button>\r\n      </div>\r\n\r\n      <div class=\"search-form\">\r\n        <el-row :gutter=\"12\">\r\n          <el-col :span=\"8\">\r\n            <el-input\r\n              v-model=\"searchParams.stockCode\"\r\n              placeholder=\"ËÇ°Á•®‰ª£Á†Å\"\r\n              class=\"search-input\"\r\n            >\r\n              <template #prepend>‰ª£Á†Å</template>\r\n            </el-input>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-input\r\n              v-model=\"searchParams.stockName\"\r\n              placeholder=\"ËÇ°Á•®ÂêçÁß∞\"\r\n              class=\"search-input\"\r\n            >\r\n              <template #prepend>ÂêçÁß∞</template>\r\n            </el-input>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-select v-model=\"searchParams.monthsBack\" class=\"search-input\">\r\n              <template #prefix>Êó∂Èó¥</template>\r\n              <el-option label=\"ÊúÄËøë‰∏Ä‰∏™Êúà\" :value=\"1\" />\r\n              <el-option label=\"ÊúÄËøë‰∏â‰∏™Êúà\" :value=\"3\" />\r\n              <el-option label=\"ÊúÄËøëÂçäÂπ¥\" :value=\"6\" />\r\n            </el-select>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <div class=\"search-actions\">\r\n          <el-button\r\n            type=\"primary\"\r\n            :loading=\"searchLoading\"\r\n            @click=\"handleSearchTest\"\r\n          >\r\n            <el-icon><Search /></el-icon>\r\n            {{ searchLoading ? 'ÊêúÁ¥¢‰∏≠...' : 'ÊâßË°åË¥üÈù¢Ê∂àÊÅØÊêúÁ¥¢' }}\r\n          </el-button>\r\n          <el-button\r\n            type=\"success\"\r\n            @click=\"handleDirectApiTest\"\r\n          >\r\n            <el-icon><Connection /></el-icon>\r\n            Áõ¥Êé•ÊµãËØïAPIÊé•Âè£\r\n          </el-button>\r\n          <el-button\r\n            type=\"info\"\r\n            @click=\"handleClearSearchCache\"\r\n          >\r\n            <el-icon><RefreshLeft /></el-icon>\r\n            Ê∏ÖÈô§ÊêúÁ¥¢ÁºìÂ≠ò\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- ÊêúÁ¥¢ÁªìÊûúÊòæÁ§∫ -->\r\n      <div v-if=\"searchResult\" class=\"search-result-display\">\r\n        <el-divider content-position=\"left\">\r\n          <el-icon><TrendCharts /></el-icon>\r\n          ÊêúÁ¥¢ÁªìÊûúÂàÜÊûê\r\n        </el-divider>\r\n        \r\n        <el-row :gutter=\"12\">\r\n          <el-col :span=\"8\">\r\n            <el-statistic title=\"ÊêúÁ¥¢ÊÄªÊï∞\" :value=\"searchResult.totalResults\" />\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-statistic title=\"Ë¥üÈù¢Ê∂àÊÅØ\" :value=\"searchResult.negativeNews?.length || 0\" />\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-statistic title=\"ÊêúÁ¥¢Áî®Êó∂\" :value=\"searchDuration\" suffix=\"ms\" />\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <div class=\"search-summary\">\r\n          <el-tag type=\"info\" size=\"large\">{{ searchResult.summary }}</el-tag>\r\n        </div>\r\n        \r\n        <!-- Ë¥üÈù¢Ê∂àÊÅØÂàóË°® -->\r\n        <div v-if=\"searchResult.negativeNews && searchResult.negativeNews.length > 0\" class=\"news-list\">\r\n          <el-card\r\n            v-for=\"(news, index) in searchResult.negativeNews\"\r\n            :key=\"index\"\r\n            class=\"news-item\"\r\n            shadow=\"hover\"\r\n          >\r\n            <div class=\"news-header\">\r\n              <strong>{{ news.title }}</strong>\r\n              <el-tag size=\"small\" type=\"warning\">Áõ∏ÂÖ≥Â∫¶: {{ news.relevance }}</el-tag>\r\n            </div>\r\n            <p class=\"news-summary\">{{ news.summary }}</p>\r\n            <div class=\"news-meta\">\r\n              <el-tag size=\"small\">{{ news.source }}</el-tag>\r\n              <span class=\"news-time\">{{ formatTime(news.publishTime) }}</span>\r\n              <el-link :href=\"news.url\" target=\"_blank\" type=\"primary\">Êü•ÁúãÂéüÊñá</el-link>\r\n            </div>\r\n            <div class=\"news-keywords\">\r\n              <el-tag\r\n                v-for=\"keyword in news.negativeKeywords\"\r\n                :key=\"keyword\"\r\n                size=\"small\"\r\n                type=\"danger\"\r\n                effect=\"plain\"\r\n              >\r\n                {{ keyword }}\r\n              </el-tag>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- ËøîÂõûÁªìÊûúÂå∫Âüü -->\r\n    <div class=\"result-section\">\r\n      <div class=\"section-header\">\r\n        <el-icon><Document /></el-icon>\r\n        <span>API Ë∞ÉÁî®ÁªìÊûú</span>\r\n      </div>\r\n      <el-input\r\n        v-model=\"localResult\"\r\n        type=\"textarea\"\r\n        :rows=\"8\"\r\n        readonly\r\n        placeholder=\"APIË∞ÉÁî®ÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå...\"\r\n        class=\"result-textarea\"\r\n      />\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Link, Position, Loading, Document, Search, Connection, RefreshLeft, TrendCharts, Check } from '@element-plus/icons-vue'\r\nimport { webSearchService } from '../utils/webSearchService.js'\r\n\r\nexport default {\r\n  name: 'WindowControl',\r\n  components: {\r\n    Link,\r\n    Position,\r\n    Loading,\r\n    Document,\r\n    Search,\r\n    Connection,\r\n    RefreshLeft,\r\n    TrendCharts,\r\n    Check\r\n  },\r\n  props: {\r\n    result: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  emits: ['api-call'],\r\n  setup(props, { emit }) {\r\n    const localResult = ref(props.result)\r\n\r\n    watch(() => props.result, (newValue) => {\r\n      localResult.value = newValue\r\n    })\r\n\r\n    // ÊêúÁ¥¢ÂèÇÊï∞\r\n    const searchParams = reactive({\r\n      stockCode: '000001',\r\n      stockName: 'Âπ≥ÂÆâÈì∂Ë°å',\r\n      monthsBack: 1\r\n    })\r\n\r\n    // ÊêúÁ¥¢Áä∂ÊÄÅ\r\n    const searchLoading = ref(false)\r\n    const searchResult = ref(null)\r\n    const searchDuration = ref(0)\r\n\r\n    // API ÈÖçÁΩÆ\r\n    const apiConfig = reactive({\r\n      currentKey: ''\r\n    })\r\n\r\n    // ÂàùÂßãÂåñ API ÈÖçÁΩÆ\r\n    const initApiConfig = () => {\r\n      apiConfig.currentKey = webSearchService.getMoonshotApiKey(true)\r\n    }\r\n\r\n    const apis = ref([\r\n      {\r\n        label: 'ÂÅ•Â∫∑Ê£ÄÊü•',\r\n        url: 'http://localhost:5000/health',\r\n        method: 'GET'\r\n      },\r\n      {\r\n        label: 'Ëé∑ÂèñÊåÅ‰ªì',\r\n        url: 'http://localhost:5000/position',\r\n        method: 'GET'\r\n      },\r\n      {\r\n        label: 'Ëé∑ÂèñËµÑÈáë',\r\n        url: 'http://localhost:5000/balance',\r\n        method: 'GET'\r\n      },\r\n      {\r\n        label: '‰∏ãÂçïÊé•Âè£',\r\n        url: 'http://localhost:5000/xiadan?code=600000&status=1',\r\n        method: 'GET'\r\n      },\r\n      {\r\n        label: 'Êí§ÂçïÊé•Âè£',\r\n        url: 'http://localhost:5000/cancel_all_orders',\r\n        method: 'GET'\r\n      }\r\n    ])\r\n\r\n    const loadingStates = reactive({})\r\n    \r\n    apis.value.forEach(api => {\r\n      loadingStates[api.url] = false\r\n    })\r\n\r\n    // APIË∞ÉÁî®Â§ÑÁêÜ\r\n    const handleApiCall = async (url) => {\r\n      loadingStates[url] = true\r\n      try {\r\n        await emit('api-call', url)\r\n      } finally {\r\n        loadingStates[url] = false\r\n      }\r\n    }\r\n\r\n    // ÁΩëÁªúÊêúÁ¥¢ÊµãËØïÔºà‰ΩøÁî®ÂâçÁ´ØÊêúÁ¥¢ÊúçÂä°Ôºâ\r\n    const handleSearchTest = async () => {\r\n      searchLoading.value = true\r\n      const startTime = Date.now()\r\n      \r\n      try {\r\n        ElMessage.info('ÂºÄÂßãÊâßË°åË¥üÈù¢Ê∂àÊÅØÊêúÁ¥¢...')\r\n        \r\n        const result = await webSearchService.searchNegativeNews(\r\n          searchParams.stockCode,\r\n          searchParams.stockName,\r\n          searchParams.monthsBack\r\n        )\r\n        \r\n        searchDuration.value = Date.now() - startTime\r\n        searchResult.value = result\r\n        \r\n        localResult.value = JSON.stringify(result, null, 2)\r\n        ElMessage.success('ÊêúÁ¥¢ÂÆåÊàêÔºÅ')\r\n        \r\n      } catch (error) {\r\n        console.error('ÊêúÁ¥¢ÊµãËØïÂ§±Ë¥•:', error)\r\n        ElMessage.error(`ÊêúÁ¥¢Â§±Ë¥•: ${error.message}`)\r\n        localResult.value = `ÊêúÁ¥¢Â§±Ë¥•: ${error.message}`\r\n      } finally {\r\n        searchLoading.value = false\r\n      }\r\n    }\r\n\r\n    // Áõ¥Êé•APIÊµãËØï\r\n    const handleDirectApiTest = async () => {\r\n      try {\r\n        ElMessage.info('ÊµãËØïAPIÊé•Âè£...')\r\n        \r\n        const response = await fetch('http://localhost:5000/api/web-search', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            query: `${searchParams.stockName} Ë¥üÈù¢Ê∂àÊÅØ ÈóÆÈ¢ò È£éÈô© ÊúÄËøë‰∏Ä‰∏™Êúà`,\r\n            limit: 3,\r\n            type: 'news'\r\n          })\r\n        })\r\n        \r\n        const data = await response.json()\r\n        localResult.value = JSON.stringify(data, null, 2)\r\n        \r\n        if (data.status === 'success') {\r\n          ElMessage.success('APIÊµãËØïÊàêÂäüÔºÅ')\r\n        } else {\r\n          ElMessage.error('APIËøîÂõûÈîôËØØ')\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('APIÊµãËØïÂ§±Ë¥•:', error)\r\n        ElMessage.error(`APIÊµãËØïÂ§±Ë¥•: ${error.message}`)\r\n        localResult.value = `APIÊµãËØïÂ§±Ë¥•: ${error.message}`\r\n      }\r\n    }\r\n\r\n    // Ê∏ÖÈô§ÊêúÁ¥¢ÁºìÂ≠ò\r\n    const handleClearSearchCache = () => {\r\n      try {\r\n        webSearchService.clearCache()\r\n        ElMessage.success('ÊêúÁ¥¢ÁºìÂ≠òÂ∑≤Ê∏ÖÈô§')\r\n        localResult.value = 'ÊêúÁ¥¢ÁºìÂ≠òÂ∑≤Ê∏ÖÈô§'\r\n      } catch (error) {\r\n        console.error('Ê∏ÖÈô§ÁºìÂ≠òÂ§±Ë¥•:', error)\r\n        ElMessage.error(`Ê∏ÖÈô§ÁºìÂ≠òÂ§±Ë¥•: ${error.message}`)\r\n      }\r\n    }\r\n\r\n    // Ê†ºÂºèÂåñÊó∂Èó¥\r\n    const formatTime = (timeStr) => {\r\n      try {\r\n        const date = new Date(timeStr)\r\n        return date.toLocaleString('zh-CN')\r\n      } catch {\r\n        return timeStr\r\n      }\r\n    }\r\n\r\n\r\n    // ÊµãËØï API ËøûÊé•\r\n    const handleTestConnection = async () => {\r\n      try {\r\n        ElMessage.info('Ê≠£Âú®ÊµãËØï API ËøûÊé•...')\r\n        \r\n        const result = await webSearchService.testMoonshotConnection()\r\n        \r\n        if (result.success) {\r\n          ElMessage.success(result.message)\r\n          localResult.value = 'Moonshot API ËøûÊé•ÊµãËØïÊàêÂäü'\r\n        } else {\r\n          ElMessage.error(result.message)\r\n          localResult.value = `Moonshot API ËøûÊé•ÊµãËØïÂ§±Ë¥•: ${result.message}`\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('API ËøûÊé•ÊµãËØïÂºÇÂ∏∏:', error)\r\n        ElMessage.error('API ËøûÊé•ÊµãËØïÂºÇÂ∏∏')\r\n        localResult.value = `API ËøûÊé•ÊµãËØïÂºÇÂ∏∏: ${error.message}`\r\n      }\r\n    }\r\n\r\n    // ÁªÑ‰ª∂ÊåÇËΩΩÊó∂ÂàùÂßãÂåñÈÖçÁΩÆ\r\n    initApiConfig()\r\n\r\n    return {\r\n      apis,\r\n      loadingStates,\r\n      handleApiCall,\r\n      localResult,\r\n      // ÊêúÁ¥¢Áõ∏ÂÖ≥\r\n      searchParams,\r\n      searchLoading,\r\n      searchResult,\r\n      searchDuration,\r\n      handleSearchTest,\r\n      handleDirectApiTest,\r\n      handleClearSearchCache,\r\n      formatTime,\r\n      // API ÈÖçÁΩÆÁõ∏ÂÖ≥\r\n      apiConfig,\r\n      handleTestConnection\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.api-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.api-item {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.api-item:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.api-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.api-label {\r\n  min-width: 80px;\r\n  font-weight: 500;\r\n  color: var(--el-text-color-primary);\r\n}\r\n\r\n.api-url {\r\n  flex: 1;\r\n}\r\n\r\n.result-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n  font-weight: 500;\r\n  color: var(--el-text-color-primary);\r\n}\r\n\r\n.result-textarea {\r\n  font-family: monospace;\r\n  background-color: var(--el-bg-color-page);\r\n}\r\n\r\n:deep(.el-card__body) {\r\n  padding: 10px;\r\n}\r\n\r\n/* ÊêúÁ¥¢ÊµãËØïÂå∫ÂüüÊ†∑Âºè */\r\n.search-test-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n/* API Áä∂ÊÄÅÊ†∑Âºè */\r\n.api-status {\r\n  margin: 16px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 12px 16px;\r\n  background: #f0f9ff;\r\n  border: 1px solid #e0f2fe;\r\n  border-radius: 8px;\r\n}\r\n\r\n.search-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n}\r\n\r\n.search-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 8px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.search-result-display {\r\n  margin-top: 20px;\r\n}\r\n\r\n.search-summary {\r\n  margin: 16px 0;\r\n  text-align: center;\r\n}\r\n\r\n.news-list {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.news-item {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.news-item:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.news-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.news-summary {\r\n  color: var(--el-text-color-regular);\r\n  margin: 8px 0;\r\n  line-height: 1.6;\r\n}\r\n\r\n.news-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin: 12px 0;\r\n}\r\n\r\n.news-time {\r\n  color: var(--el-text-color-secondary);\r\n  font-size: 12px;\r\n}\r\n\r\n.news-keywords {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 6px;\r\n  margin-top: 12px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .api-content {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n\r\n  .api-label {\r\n    min-width: auto;\r\n  }\r\n  \r\n  .search-actions {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .news-header {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .news-meta {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 8px;\r\n  }\r\n}\r\n</style> "],"names":["WebSearch","stockCode","stockName","monthsBack","cacheKey","cached","searchQueries","searchResults","query","result","error","processedNews","timeFilter","now","pastDate","searchResult","apiKey","messages","tools","finishReason","response","choice","toolCall","toolCallName","toolCallArguments","toolResult","content","jsonMatch","results","item","a","b","publishDate","cutoffDate","isWithinRange","publishTime","date","chineseDateMatch","year","month","day","dashDateMatch","slashDateMatch","negativeKeywords","keyword","negativeNews","totalNews","majorKeywords","news","topKeywords","ms","resolve","WEB_SEARCH_CONFIG","masked","data","webSearchService","_sfc_main","Link","Position","Loading","Document","Search","Connection","RefreshLeft","TrendCharts","Check","props","emit","localResult","ref","watch","newValue","searchParams","reactive","searchLoading","searchDuration","apiConfig","initApiConfig","apis","loadingStates","api","handleApiCall","url","handleSearchTest","startTime","ElMessage","handleDirectApiTest","handleClearSearchCache","formatTime","timeStr","handleTestConnection","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_createBlock","_component_el_card","_cache","_createElementVNode","_createElementBlock","_Fragment","_renderList","$setup","_toDisplayString","_createVNode","_component_el_input","$event","_component_el_icon","_component_Link","_component_el_button","_ctx","_component_el_tag","_component_Check","_component_el_row","_component_el_col","_component_el_select","_component_el_option","_component_Search","_createTextVNode","_component_Connection","_component_RefreshLeft","_openBlock","_hoisted_7","_component_el_divider","_component_TrendCharts","_component_el_statistic","_a","_hoisted_9","index","_component_el_link","_component_Document"],"mappings":"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"}