import{i as T}from"./index-79ad53b8.js";import{_ as k,k as w,l as S,C as L,D as M,o as c,g as r,r as h,F as R,i as z,a as y,w as i,e as f,f as d,Q as D,R as $,d as l,b as g,j as b}from"./index-b2bdff4a.js";const N={name:"StockKLine",props:{code:{type:String,required:!0},klineData:{type:Array,required:!0}},setup(t){const a=w(null);let s=null;const _=()=>{a.value&&(s=T(a.value),window.addEventListener("resize",p))},p=()=>{s&&s.resize()},n=()=>{if(!s||!t.klineData.length)return;const u={animation:!1,grid:{left:"3%",right:"3%",bottom:"3%",top:"3%",containLabel:!0},xAxis:{type:"category",data:t.klineData.map(o=>o.date),scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{scale:!0,splitArea:{show:!0},axisLabel:{show:!1}},series:[{type:"candlestick",data:t.klineData.map(o=>o.value),itemStyle:{color:"#ec0000",color0:"#00da3c",borderColor:"#8A0000",borderColor0:"#008F28"}}]};s.setOption(u)};return S(()=>t.klineData,()=>{n()},{deep:!0}),L(()=>{_(),n()}),M(()=>{s&&(s.dispose(),window.removeEventListener("resize",p))}),{chartRef:a}}},j={ref:"chartRef",class:"kline-chart"};function I(t,a,s,_,p,n){return c(),r("div",j,null,512)}const A=k(N,[["render",I],["__scopeId","data-v-0f33b15c"]]);class B{constructor(){this.colorMap=new Map,this.usedColors=new Set,this.colorTypes=["success","warning","danger","info","primary"],this.colorIndex=0}getTagColorClass(a){if(this.colorMap.has(a))return this.colorMap.get(a);const s={概念:"success",题材:"success",热点:"success",业绩:"warning",预增:"warning",扭亏:"warning",超预期:"warning",政策:"danger",利好:"danger",支持:"danger",公告:"info",披露:"info",回复:"info",重组:"primary",收购:"primary",合作:"primary",投资:"primary",研发:"primary",技术:"primary"};if(s[a])return this.colorMap.set(a,s[a]),s[a];for(const[p,n]of Object.entries(s))if(a.includes(p))return this.colorMap.set(a,n),n;const _=this.colorTypes[this.colorIndex%this.colorTypes.length];return this.colorMap.set(a,_),this.colorIndex++,_}clearColorMap(){this.colorMap.clear(),this.colorIndex=0}}const K=new B;const F={name:"ReasonTags",props:{reasonType:{type:String,default:""}},computed:{reasons(){return this.reasonType?this.reasonType.split("+").map(t=>t.trim()).filter(t=>t):[]}},methods:{getReasonTagType(t){return K.getTagColorClass(t)}}},V={key:0,class:"reason-tags"},q={key:1};function E(t,a,s,_,p,n){const u=h("el-tag");return n.reasons&&n.reasons.length?(c(),r("div",V,[(c(!0),r(R,null,z(n.reasons,(o,m)=>(c(),y(u,{key:m,type:n.getReasonTagType(o),size:"small",class:"reason-tag"},{default:i(()=>[f(d(o),1)]),_:2},1032,["type"]))),128))])):(c(),r("span",q,"--"))}const O=k(F,[["render",E],["__scopeId","data-v-01e7a195"]]);const G={name:"StockTable",components:{StockKLine:A,ReasonTags:O},props:{tableData:{type:Array,required:!0},loading:{type:Boolean,default:!1},showKLine:{type:Boolean,default:!0}},emits:["row-click","sort-change"],methods:{handleRowClick(t){this.$emit("row-click",t)},handleSortChange({prop:t,order:a}){this.$emit("sort-change",{prop:t,order:a})}}},Q={class:"stock-info"},U={class:"stock-name"},Z={class:"stock-code"},H={key:0,class:"stock-zttj"},J={key:0},P={class:"price"},W={key:1},X={key:0},Y={key:1};function ee(t,a,s,_,p,n){const u=h("el-tag"),o=h("el-table-column"),m=h("reason-tags"),v=h("stock-k-line"),C=h("el-table"),x=D("loading");return $((c(),y(C,{data:s.tableData,style:{width:"100%"},border:"",stripe:"",onRowClick:n.handleRowClick,onSortChange:n.handleSortChange},{default:i(()=>[l(o,{label:"股票信息","min-width":"65"},{default:i(({row:e})=>[g("div",Q,[g("span",U,d(e.name),1),g("span",Z,d(e.code),1),e.zttj_ct&&e.zttj_days?(c(),r("span",H,[l(u,{type:"info",size:"small"},{default:i(()=>[f(d(e.zttj_ct)+"/"+d(e.zttj_days),1)]),_:2},1024)])):b("",!0)])]),_:1}),l(o,{label:"现价","min-width":"60",align:"right"},{default:i(({row:e})=>[e.price!==null&&e.price!==void 0&&!isNaN(e.price)?(c(),r("div",J,[g("span",P,d(Number(e.price).toFixed(2)),1)])):(c(),r("span",W,"--"))]),_:1}),l(o,{prop:"change",label:"涨跌幅","min-width":"70",align:"right",sortable:"custom"},{default:i(({row:e})=>[e.change!==null&&e.change!==void 0&&!isNaN(e.change)?(c(),r("div",X,[l(u,{type:e.change>0?"danger":e.change<0?"success":"info",size:"small"},{default:i(()=>[f(d(e.change>0?"+":"")+d(Number(e.change).toFixed(2))+"% ",1)]),_:2},1032,["type"])])):(c(),r("span",Y,"--"))]),_:1}),l(o,{label:"涨停原因",prop:"reason_type","min-width":"120",align:"center",sortable:"custom"},{default:i(({row:e})=>[l(m,{"reason-type":e.reason_type},null,8,["reason-type"])]),_:1}),s.showKLine?(c(),y(o,{key:0,label:"K线图","min-width":"130",align:"center"},{default:i(({row:e})=>[l(v,{code:e.code,"kline-data":e.klineData||[]},null,8,["code","kline-data"])]),_:1})):b("",!0)]),_:1},8,["data","onRowClick","onSortChange"])),[[x,s.loading]])}const se=k(G,[["render",ee],["__scopeId","data-v-5a716e71"]]);export{se as S};
//# sourceMappingURL=StockTable-ebb72ca8.js.map
