import{_ as w,i as z,c as p,k as T,o as l,f as n,b as o,F as _,m as d,J as v,t as r,p as D,h as f}from"./index-a0dcb939.js";const x={class:"zt-tian-ti-new"},$={class:"zt-stats-bar"},E={class:"zt-stat-label"},B={class:"zt-stat-value"},C={class:"zt-tian-ti-content-new"},Z={key:0,class:"zt-loading"},F={key:1,class:"zt-empty"},L={key:2,class:"zt-tian-ti-table-new"},M={class:"zt-tier-label"},N={class:"zt-tier-main"},O={class:"zt-tier-stocks"},S={class:"zt-stock-header"},V={class:"zt-stock-name"},I={key:0,class:"zt-yizi-tag"},J={class:"zt-stock-tags"},R={class:"zt-stock-meta"},m={class:"zt-stock-time"},q={key:0,class:"zt-stock-time"},A={class:"zt-stock-extra"},G={key:0,class:"zt-stock-extra-label"},H={__name:"ZTTianTi",setup(K){const u=z(!1),i=z([]),b=p(()=>{const t=[{label:"泛金融",value:0,bg:"#f56c6c",color:"#fff"},{label:"稀土",value:0,bg:"#ff9800",color:"#fff"},{label:"光伏",value:0,bg:"#e0f7fa",color:"#333"},{label:"医药",value:0,bg:"#e1bee7",color:"#333"},{label:"金属",value:0,bg:"#ffe082",color:"#333"},{label:"地产基建",value:0,bg:"#bdbdbd",color:"#333"},{label:"军工",value:0,bg:"#b0bec5",color:"#333"},{label:"氢能",value:0,bg:"#b2dfdb",color:"#333"}];return i.value.forEach(s=>{s.reason_type&&s.reason_type.includes("泛金融")&&t[0].value++,s.reason_type&&s.reason_type.includes("稀土")&&t[1].value++,s.reason_type&&s.reason_type.includes("光伏")&&t[2].value++,s.reason_type&&s.reason_type.includes("医药")&&t[3].value++,s.reason_type&&s.reason_type.includes("金属")&&t[4].value++,s.reason_type&&s.reason_type.includes("地产基建")&&t[5].value++,s.reason_type&&s.reason_type.includes("军工")&&t[6].value++,s.reason_type&&s.reason_type.includes("氢能")&&t[7].value++}),t.filter(s=>s.value>0)}),g=async()=>{u.value=!0;try{const a=await(await fetch("https://www.wttiao.com/moni/ztpool/get?startDate=2025-07-11&endDate=2025-07-13")).json();a.code===0&&(a.data.forEach(c=>{c.yizi=c.yz_flag===1||c.yz_flag===void 0&&c.name&&c.name.includes("一字")}),i.value=a.data||[])}catch{}finally{u.value=!1}},h=p(()=>{const t={};return i.value.forEach(s=>{if(s.zttj_days===s.zttj_ct){const e=s.zttj_days;t[e]||(t[e]={zttj_days:e,stocks:[]}),t[e].stocks.push(s)}}),Object.values(t).sort((s,e)=>e.zttj_days-s.zttj_days)}),k=t=>t?t.split("+").filter(s=>s.trim()):[],j=t=>{const s={泛金融:"#f56c6c",稀土:"#ff9800",光伏:"#7ec6f3",医药:"#b388ff",金属:"#ffd54f",地产基建:"#bdbdbd",军工:"#90a4ae",氢能:"#80cbc4",公告:"#e0e0e0",一字:"#e040fb"};for(const[e,a]of Object.entries(s))if(t.includes(e))return a;return"#e0e0e0"},y=t=>{if(!t)return"";const s=t.toString();return s.length===5?`${s.slice(0,2)}:${s.slice(2,4)}:${s.slice(4)}`:t};return T(()=>{g()}),(t,s)=>(l(),n("div",x,[o("div",$,[(l(!0),n(_,null,d(b.value,e=>(l(),n("div",{key:e.label,class:"zt-stat-tag",style:v({background:e.bg,color:e.color})},[o("span",E,r(e.label)+":",1),o("span",B,r(e.value),1)],4))),128))]),o("div",C,[u.value?(l(),n("div",Z,s[0]||(s[0]=[o("span",{class:"zt-loading-spinner"},null,-1),o("span",null,"数据加载中...",-1)]))):i.value.length?(l(),n("div",L,[(l(!0),n(_,null,d(h.value,e=>(l(),n("div",{key:e.zttj_days,class:"zt-tier-row"},[o("div",M,[o("span",N,r(e.zttj_days===1?"首板":e.zttj_days+"板"),1)]),o("div",O,[(l(!0),n(_,null,d(e.stocks,a=>(l(),n("div",{key:a.id,class:D(["zt-stock-card",{"zt-stock-yizi":a.yizi}])},[o("div",S,[o("span",V,r(a.name),1),a.yizi?(l(),n("span",I,"一字")):f("",!0)]),o("div",J,[(l(!0),n(_,null,d(k(a.reason_type),c=>(l(),n("span",{key:c,class:"zt-reason-tag",style:v({background:j(c)})},r(c),5))),128))]),o("div",R,[o("span",m,r(y(a.first_zt_time)),1),a.last_zt_time&&a.last_zt_time!==a.first_zt_time?(l(),n("span",q,r(y(a.last_zt_time)),1)):f("",!0)]),o("div",A,[a.extra?(l(),n("span",G,r(a.extra),1)):f("",!0)])],2))),128))])]))),128))])):(l(),n("div",F,s[1]||(s[1]=[o("span",null,"暂无数据",-1)])))])]))}},Q=w(H,[["__scopeId","data-v-8099e42f"]]);export{Q as default};
//# sourceMappingURL=ZTTianTi-c67bc9e4.js.map
