import{_ as k,r as c,o as _,g as u,d as s,w as t,b as n,e as l,f as m,F as y,i as C,n as v}from"./index-b2bdff4a.js";const M={name:"WebSocketConnection",data(){return{ws:null,connectionStatus:"disconnected",messageToSend:"",messages:[],wsUrl:"ws://127.0.0.1:8765/"}},computed:{connectionStatusText(){return this.connectionStatus==="connected"?"已连接":"未连接"}},methods:{connect(){try{this.ws=new WebSocket(this.wsUrl),this.ws.onopen=()=>{this.connectionStatus="connected",this.addMessage("连接成功","success")},this.ws.onmessage=o=>{this.addMessage(`收到: ${o.data}`,"received")},this.ws.onclose=()=>{this.connectionStatus="disconnected",this.addMessage("连接已关闭","warning")},this.ws.onerror=o=>{this.addMessage(`连接错误: ${o}`,"error")}}catch(o){this.addMessage(`连接失败: ${o.message}`,"error")}},disconnect(){this.ws&&(this.ws.close(),this.ws=null)},sendMessage(){this.ws&&this.connectionStatus==="connected"&&this.messageToSend.trim()&&(this.ws.send(this.messageToSend),this.addMessage(`发送: ${this.messageToSend}`,"sent"),this.messageToSend="")},addMessage(o,e){const g=new Date().toLocaleTimeString();this.messages.unshift({content:o,type:e,timestamp:g}),this.messages.length>100&&(this.messages=this.messages.slice(0,100))},clearMessages(){this.messages=[]}},beforeUnmount(){this.disconnect()}},T={class:"websocket-container"},x={class:"card-header"},V={class:"connection-controls"},W={class:"message-section"},U={class:"message-display"},B={class:"message-time"},N={class:"message-content"};function D(o,e,g,F,a,i){const h=c("el-tag"),r=c("el-button"),S=c("el-input"),p=c("el-col"),w=c("el-row"),f=c("el-card");return _(),u("div",T,[s(f,{class:"main-card"},{header:t(()=>[n("div",x,[e[1]||(e[1]=n("span",null,"WebSocket 连接",-1)),s(h,{type:a.connectionStatus==="connected"?"success":"danger"},{default:t(()=>[l(m(i.connectionStatusText),1)]),_:1},8,["type"])])]),default:t(()=>[n("div",V,[s(r,{onClick:i.connect,disabled:a.connectionStatus==="connected",type:"primary"},{default:t(()=>e[2]||(e[2]=[l(" 连接 ")])),_:1,__:[2]},8,["onClick","disabled"]),s(r,{onClick:i.disconnect,disabled:a.connectionStatus==="disconnected",type:"danger"},{default:t(()=>e[3]||(e[3]=[l(" 断开连接 ")])),_:1,__:[3]},8,["onClick","disabled"]),s(r,{onClick:i.clearMessages,type:"info"},{default:t(()=>e[4]||(e[4]=[l("清空消息")])),_:1,__:[4]},8,["onClick"])]),n("div",W,[s(w,{gutter:20},{default:t(()=>[s(p,{span:12},{default:t(()=>[e[6]||(e[6]=n("h3",null,"发送消息",-1)),s(S,{modelValue:a.messageToSend,"onUpdate:modelValue":e[0]||(e[0]=d=>a.messageToSend=d),type:"textarea",rows:4,placeholder:"输入要发送的消息..."},null,8,["modelValue"]),s(r,{onClick:i.sendMessage,disabled:a.connectionStatus!=="connected",type:"success",style:{"margin-top":"10px"}},{default:t(()=>e[5]||(e[5]=[l(" 发送消息 ")])),_:1,__:[5]},8,["onClick","disabled"])]),_:1,__:[6]}),s(p,{span:12},{default:t(()=>[e[7]||(e[7]=n("h3",null,"接收消息",-1)),n("div",U,[(_(!0),u(y,null,C(a.messages,(d,b)=>(_(),u("div",{key:b,class:v(["message-item",d.type])},[n("span",B,m(d.timestamp),1),n("span",N,m(d.content),1)],2))),128))])]),_:1,__:[7]})]),_:1})])]),_:1})])}const z=k(M,[["render",D],["__scopeId","data-v-84d383bd"]]);export{z as default};
//# sourceMappingURL=WebSocketConnection-cdca436b.js.map
