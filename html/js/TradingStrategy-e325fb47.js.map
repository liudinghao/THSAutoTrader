{"version":3,"file":"TradingStrategy-e325fb47.js","sources":["../../front/src/views/TradingStrategy.vue"],"sourcesContent":["<template>\r\n  <div class=\"trading-strategy-container\">\r\n    <!-- 左侧策略表单 -->\r\n    <el-card class=\"strategy-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span class=\"title\">交易策略</span>\r\n        </div>\r\n      </template>\r\n\r\n      <el-form \r\n        ref=\"strategyForm\"\r\n        :model=\"strategyData\"\r\n        label-position=\"top\"\r\n        class=\"strategy-form\"\r\n      >\r\n        <el-form-item label=\"策略名称\" required>\r\n          <el-input\r\n            v-model=\"strategyData.strategyName\"\r\n            placeholder=\"请输入策略名称\"\r\n            class=\"w-full\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"策略描述\" required>\r\n          <el-input\r\n            v-model=\"strategyData.strategyDescription\"\r\n            type=\"textarea\"\r\n            :rows=\"8\"\r\n            placeholder=\"请详细描述您的交易策略，包括策略类型、风险偏好、仓位管理、止损设置等\"\r\n            class=\"w-full\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <div class=\"form-actions\">\r\n            <el-button\r\n              type=\"primary\"\r\n              :icon=\"Check\"\r\n              @click=\"saveStrategy\"\r\n              :loading=\"loading\"\r\n              :disabled=\"!isStrategyValid\"\r\n            >\r\n              保存策略\r\n            </el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!-- 右侧股票筛选结果 -->\r\n    <el-card class=\"stock-result-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span class=\"title\">策略筛选结果</span>\r\n          <div class=\"header-actions\">\r\n            <el-button\r\n              type=\"primary\"\r\n              :icon=\"Search\"\r\n              @click=\"filterStocks\"\r\n              :loading=\"isFiltering\"\r\n              :disabled=\"!isStrategyValid\"\r\n            >\r\n              根据策略筛选股票\r\n            </el-button>\r\n            <el-button\r\n              v-if=\"filteredStocks.length > 0\"\r\n              :icon=\"Refresh\"\r\n              @click=\"clearFilter\"\r\n            >\r\n              清空结果\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <div v-if=\"isFiltering\" class=\"filtering-status\">\r\n        <el-icon class=\"is-loading\"><Loading /></el-icon>\r\n        <span>正在根据策略筛选股票...</span>\r\n      </div>\r\n\r\n      <div v-else-if=\"filteredStocks.length > 0\" class=\"stock-list\">\r\n        <div class=\"result-summary\">\r\n          <el-tag type=\"info\">共找到 {{ filteredStocks.length }} 只符合条件的股票</el-tag>\r\n        </div>\r\n        \r\n        <stock-table\r\n          :table-data=\"filteredStocks\"\r\n          :loading=\"false\"\r\n          :show-k-line=\"false\"\r\n          @row-click=\"handleStockClick\"\r\n          @sort-change=\"handleSortChange\"\r\n        />\r\n      </div>\r\n\r\n      <div v-else-if=\"hasFiltered\" class=\"no-result\">\r\n        <el-empty description=\"未找到符合条件的股票\" />\r\n      </div>\r\n\r\n      <div v-else class=\"empty-state\">\r\n        <el-empty description=\"请先输入策略信息，然后点击筛选按钮\" />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Check, Search, Refresh, Loading } from '@element-plus/icons-vue'\r\nimport StockTable from '../components/stock/StockTable.vue'\r\n\r\nexport default {\r\n  name: 'TradingStrategy',\r\n  components: {\r\n    Check,\r\n    Search,\r\n    Refresh,\r\n    Loading,\r\n    StockTable\r\n  },\r\n  props: {\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      strategyData: {\r\n        strategyName: '',\r\n        strategyDescription: ''\r\n      },\r\n      filteredStocks: [],\r\n      isFiltering: false,\r\n      hasFiltered: false\r\n    }\r\n  },\r\n  computed: {\r\n    isStrategyValid() {\r\n      return this.strategyData.strategyName.trim().length > 0 && \r\n             this.strategyData.strategyDescription.trim().length > 0\r\n    }\r\n  },\r\n  methods: {\r\n    saveStrategy() {\r\n      if (!this.isStrategyValid) return\r\n      \r\n      const strategy = {\r\n        name: this.strategyData.strategyName.trim(),\r\n        description: this.strategyData.strategyDescription.trim(),\r\n        timestamp: new Date().toISOString()\r\n      }\r\n      \r\n      this.$emit('strategy-saved', strategy)\r\n      \r\n      // 使用 Element Plus 的消息提示\r\n      this.$message({\r\n        type: 'success',\r\n        message: '策略保存成功!'\r\n      })\r\n    },\r\n    \r\n    async filterStocks() {\r\n      if (!this.isStrategyValid) {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '请先完善策略信息'\r\n        })\r\n        return\r\n      }\r\n\r\n      this.isFiltering = true\r\n      this.hasFiltered = true\r\n      \r\n      try {\r\n        // 模拟API调用，实际项目中这里应该调用真实的筛选API\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        // 模拟筛选结果数据\r\n        this.filteredStocks = [\r\n          {\r\n            code: '000001',\r\n            name: '平安银行',\r\n            price: 12.34,\r\n            change: 2.5,\r\n            speed: 1.2,\r\n            reason_type: '业绩预增'\r\n          },\r\n          {\r\n            code: '000002',\r\n            name: '万科A',\r\n            price: 18.56,\r\n            change: -1.2,\r\n            speed: -0.8,\r\n            reason_type: '政策利好'\r\n          },\r\n          {\r\n            code: '600036',\r\n            name: '招商银行',\r\n            price: 45.67,\r\n            change: 3.1,\r\n            speed: 1.5,\r\n            reason_type: '技术突破'\r\n          }\r\n        ]\r\n        \r\n        this.$message({\r\n          type: 'success',\r\n          message: `筛选完成，找到 ${this.filteredStocks.length} 只符合条件的股票`\r\n        })\r\n      } catch (error) {\r\n        this.$message({\r\n          type: 'error',\r\n          message: '筛选失败，请重试'\r\n        })\r\n      } finally {\r\n        this.isFiltering = false\r\n      }\r\n    },\r\n    \r\n    clearFilter() {\r\n      this.filteredStocks = []\r\n      this.hasFiltered = false\r\n    },\r\n    \r\n    handleStockClick(stock) {\r\n      console.log('点击股票:', stock)\r\n      // 这里可以添加股票详情查看逻辑\r\n    },\r\n    \r\n    handleSortChange({ prop, order }) {\r\n      console.log('排序变化:', prop, order)\r\n      // 这里可以添加排序逻辑\r\n    },\r\n    \r\n    resetStrategy() {\r\n      this.strategyData = {\r\n        strategyName: '',\r\n        strategyDescription: ''\r\n      }\r\n    },\r\n    \r\n    getStrategy() {\r\n      return {\r\n        name: this.strategyData.strategyName.trim(),\r\n        description: this.strategyData.strategyDescription.trim()\r\n      }\r\n    },\r\n    \r\n    setStrategy(strategy) {\r\n      if (strategy) {\r\n        this.strategyData = {\r\n          strategyName: strategy.name || '',\r\n          strategyDescription: strategy.description || ''\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.trading-strategy-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n  height: 100%;\r\n}\r\n\r\n.strategy-card {\r\n  height: fit-content;\r\n}\r\n\r\n.stock-result-card {\r\n  height: fit-content;\r\n  min-height: 400px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.strategy-form {\r\n  padding: 20px;\r\n  background-color: var(--el-bg-color-page);\r\n  border-radius: 4px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.filtering-status {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 20px;\r\n  color: var(--el-text-color-regular);\r\n  gap: 12px;\r\n}\r\n\r\n.stock-list {\r\n  padding: 20px 0;\r\n}\r\n\r\n.result-summary {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.no-result {\r\n  padding: 40px 20px;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 20px;\r\n}\r\n\r\n:deep(.el-form-item__label) {\r\n  font-weight: 500;\r\n}\r\n\r\n:deep(.el-input-number) {\r\n  width: 100%;\r\n}\r\n\r\n:deep(.el-select) {\r\n  width: 100%;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 1200px) {\r\n  .trading-strategy-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 16px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .trading-strategy-container {\r\n    gap: 12px;\r\n  }\r\n  \r\n  .form-actions {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .form-actions .el-button {\r\n    width: 100%;\r\n  }\r\n  \r\n  .header-actions {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .header-actions .el-button {\r\n    width: 100%;\r\n  }\r\n}\r\n</style> "],"names":["_sfc_main","Check","Search","Refresh","Loading","StockTable","strategy","resolve","stock","prop","order","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_7","_openBlock","_createElementBlock","_createVNode","_component_el_card","_cache","_createElementVNode","_component_el_form","$data","_component_el_form_item","_component_el_input","$event","_component_el_button","_ctx","$options","$props","_createBlock","_hoisted_5","_component_el_icon","_component_Loading","_hoisted_6","_component_el_tag","_createTextVNode","_toDisplayString","_component_stock_table","_hoisted_8","_component_el_empty","_hoisted_9"],"mappings":"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"}